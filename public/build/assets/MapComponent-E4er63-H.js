var Qs=Object.defineProperty;var ta=(c,l,h)=>l in c?Qs(c,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):c[l]=h;var St=(c,l,h)=>ta(c,typeof l!="symbol"?l+"":l,h);import{e as ea,r as ia,d as Fn,f as na,h as gt,i as Et,j as We,k as Er,c as nt,o as Y,l as qt,b as I,F as me,m as Zn,n as Oi,u as Dt,p as Be,w as ze,q as Ht,a as pe,s as hi,t as fe,v as ln,x as oa,y as si,z as Go,A as Re,B as Ot,C as ai,D as ra,E as Vt,G as sa,H as Vo,I as aa,J as de,K as qo,L as la,M as ha,N as Si}from"./app-6pSmfv79.js";var li={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ua=li.exports,jo;function Mr(){return jo||(jo=1,function(c,l){(function(h,d){d(l)})(ua,function(h){var d="1.9.4";function n(t){var e,i,o,a;for(i=1,o=arguments.length;i<o;i++){a=arguments[i];for(e in a)t[e]=a[e]}return t}var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function s(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var o=i.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(i.call(arguments)):arguments)}}var f=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function m(t,e,i){var o,a,u,v;return v=function(){o=!1,a&&(u.apply(i,a),a=!1)},u=function(){o?a=arguments:(t.apply(i,arguments),setTimeout(v,e),o=!0)},u}function g(t,e,i){var o=e[1],a=e[0],u=o-a;return t===o&&i?t:((t-a)%u+u)%u+a}function y(){return!1}function E(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function O(t){return S(t).split(/\s+/)}function A(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function z(t,e,i){var o=[];for(var a in t)o.push(encodeURIComponent(i?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(!e||e.indexOf("?")===-1?"?":"&")+o.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function Z(t,e){return t.replace(N,function(i,o){var a=e[o];if(a===void 0)throw new Error("No value provided for variable "+i);return typeof a=="function"&&(a=a(e)),a})}var U=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function et(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var rt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var M=0;function p(t){var e=+new Date,i=Math.max(0,16-(e-M));return M=e+i,window.setTimeout(t,i)}var w=window.requestAnimationFrame||C("RequestAnimationFrame")||p,P=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function D(t,e,i){if(i&&w===p)t.call(e);else return w.call(window,s(t,e))}function B(t){t&&P.call(window,t)}var W={__proto__:null,extend:n,create:r,bind:s,get lastId(){return f},stamp:_,throttle:m,wrapNum:g,falseFn:y,formatNum:E,trim:S,splitWords:O,setOptions:A,getParamString:z,template:Z,isArray:U,indexOf:et,emptyImageUrl:rt,requestFn:w,cancelFn:P,requestAnimFrame:D,cancelAnimFrame:B};function q(){}q.extend=function(t){var e=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);o.constructor=e,e.prototype=o;for(var a in this)Object.prototype.hasOwnProperty.call(this,a)&&a!=="prototype"&&a!=="__super__"&&(e[a]=this[a]);return t.statics&&n(e,t.statics),t.includes&&(j(t.includes),n.apply(null,[o].concat(t.includes))),n(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var u=0,v=o._initHooks.length;u<v;u++)o._initHooks[u].call(this)}},e},q.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},q.mergeOptions=function(t){return n(this.prototype.options,t),this},q.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function j(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=U(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var at={on:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e);else{t=O(t);for(var a=0,u=t.length;a<u;a++)this._on(t[a],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var o in t)this._off(o,t[o],e);else{t=O(t);for(var a=arguments.length===1,u=0,v=t.length;u<v;u++)a?this._off(t[u]):this._off(t[u],e,i)}return this},_on:function(t,e,i,o){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var a={fn:e,ctx:i};o&&(a.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(a)}},_off:function(t,e,i){var o,a,u;if(this._events&&(o=this._events[t],!!o)){if(arguments.length===1){if(this._firingCount)for(a=0,u=o.length;a<u;a++)o[a].fn=y;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var v=this._listens(t,e,i);if(v!==!1){var b=o[v];this._firingCount&&(b.fn=y,this._events[t]=o=o.slice()),o.splice(v,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var u=0,v=a.length;u<v;u++){var b=a[u],x=b.fn;b.once&&this.off(t,x,b.ctx),x.call(b.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e,i,o){typeof t!="string"&&console.warn('"string" type argument expected');var a=e;typeof e!="function"&&(o=!!e,a=void 0,i=void 0);var u=this._events&&this._events[t];if(u&&u.length&&this._listens(t,a,i)!==!1)return!0;if(o){for(var v in this._eventParents)if(this._eventParents[v].listens(t,e,i,o))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var o=this._events[t]||[];if(!e)return!!o.length;i===this&&(i=void 0);for(var a=0,u=o.length;a<u;a++)if(o[a].fn===e&&o[a].ctx===i)return a;return!1},once:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e,!0);else{t=O(t);for(var a=0,u=t.length;a<u;a++)this._on(t[a],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};at.addEventListener=at.on,at.removeEventListener=at.clearAllEventListeners=at.off,at.addOneTimeEventListener=at.once,at.fireEvent=at.fire,at.hasEventListeners=at.listens;var Mt=q.extend(at);function G(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var At=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(F(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(F(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=At(this.x),this.y=At(this.y),this},distanceTo:function(t){t=F(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=F(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=F(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function F(t,e,i){return t instanceof G?t:U(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,e,i)}function Q(t,e){if(t)for(var i=e?[t,e]:t,o=0,a=i.length;o<a;o++)this.extend(i[o])}Q.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)e=i=F(t);else if(t=yt(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof G?t=F(t):t=yt(t),t instanceof Q?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=yt(t);var e=this.min,i=this.max,o=t.min,a=t.max,u=a.x>=e.x&&o.x<=i.x,v=a.y>=e.y&&o.y<=i.y;return u&&v},overlaps:function(t){t=yt(t);var e=this.min,i=this.max,o=t.min,a=t.max,u=a.x>e.x&&o.x<i.x,v=a.y>e.y&&o.y<i.y;return u&&v},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,o=Math.abs(e.x-i.x)*t,a=Math.abs(e.y-i.y)*t;return yt(F(e.x-o,e.y-a),F(i.x+o,i.y+a))},equals:function(t){return t?(t=yt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function yt(t,e){return!t||t instanceof Q?t:new Q(t,e)}function vt(t,e){if(t)for(var i=e?[t,e]:t,o=0,a=i.length;o<a;o++)this.extend(i[o])}vt.prototype={extend:function(t){var e=this._southWest,i=this._northEast,o,a;if(t instanceof ot)o=t,a=t;else if(t instanceof vt){if(o=t._southWest,a=t._northEast,!o||!a)return this}else return t?this.extend(J(t)||ct(t)):this;return!e&&!i?(this._southWest=new ot(o.lat,o.lng),this._northEast=new ot(a.lat,a.lng)):(e.lat=Math.min(o.lat,e.lat),e.lng=Math.min(o.lng,e.lng),i.lat=Math.max(a.lat,i.lat),i.lng=Math.max(a.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,a=Math.abs(e.lng-i.lng)*t;return new vt(new ot(e.lat-o,e.lng-a),new ot(i.lat+o,i.lng+a))},getCenter:function(){return new ot((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ot(this.getNorth(),this.getWest())},getSouthEast:function(){return new ot(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ot||"lat"in t?t=J(t):t=ct(t);var e=this._southWest,i=this._northEast,o,a;return t instanceof vt?(o=t.getSouthWest(),a=t.getNorthEast()):o=a=t,o.lat>=e.lat&&a.lat<=i.lat&&o.lng>=e.lng&&a.lng<=i.lng},intersects:function(t){t=ct(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),a=t.getNorthEast(),u=a.lat>=e.lat&&o.lat<=i.lat,v=a.lng>=e.lng&&o.lng<=i.lng;return u&&v},overlaps:function(t){t=ct(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),a=t.getNorthEast(),u=a.lat>e.lat&&o.lat<i.lat,v=a.lng>e.lng&&o.lng<i.lng;return u&&v},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ct(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ct(t,e){return t instanceof vt?t:new vt(t,e)}function ot(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}ot.prototype={equals:function(t,e){if(!t)return!1;t=J(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+E(this.lat,t)+", "+E(this.lng,t)+")"},distanceTo:function(t){return it.distance(this,J(t))},wrap:function(){return it.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return ct([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new ot(this.lat,this.lng,this.alt)}};function J(t,e,i){return t instanceof ot?t:U(t)&&typeof t[0]!="object"?t.length===3?new ot(t[0],t[1],t[2]):t.length===2?new ot(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ot(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new ot(t,e,i)}var T={latLngToPoint:function(t,e){var i=this.projection.project(t),o=this.scale(e);return this.transformation._transform(i,o)},pointToLatLng:function(t,e){var i=this.scale(e),o=this.transformation.untransform(t,i);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),o=this.transformation.transform(e.min,i),a=this.transformation.transform(e.max,i);return new Q(o,a)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return new ot(i,e,o)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),o=e.lat-i.lat,a=e.lng-i.lng;if(o===0&&a===0)return t;var u=t.getSouthWest(),v=t.getNorthEast(),b=new ot(u.lat-o,u.lng-a),x=new ot(v.lat-o,v.lng-a);return new vt(b,x)}},it=n({},T,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,o=t.lat*i,a=e.lat*i,u=Math.sin((e.lat-t.lat)*i/2),v=Math.sin((e.lng-t.lng)*i/2),b=u*u+Math.cos(o)*Math.cos(a)*v*v,x=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*x}}),dt=6378137,ft={R:dt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),a=Math.sin(o*e);return new G(this.R*t.lng*e,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var e=180/Math.PI;return new ot((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=dt*Math.PI;return new Q([-t,-t],[t,t])}()};function pt(t,e,i,o){if(U(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=o}pt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new G((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function lt(t,e,i,o){return new pt(t,e,i,o)}var zt=n({},it,{code:"EPSG:3857",projection:ft,transformation:function(){var t=.5/(Math.PI*ft.R);return lt(t,.5,-t,.5)}()}),Gt=n({},zt,{code:"EPSG:900913"});function Nt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Zt(t,e){var i="",o,a,u,v,b,x;for(o=0,u=t.length;o<u;o++){for(b=t[o],a=0,v=b.length;a<v;a++)x=b[a],i+=(a?"L":"M")+x.x+" "+x.y;i+=e?H.svg?"z":"x":""}return i||"M0 0"}var Bt=document.documentElement.style,bt="ActiveXObject"in window,xe=bt&&!document.addEventListener,_e="msLaunchUri"in navigator&&!("documentMode"in document),ve=ee("webkit"),ge=ee("android"),ye=ee("android 2")||ee("android 3"),Pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Te=ge&&ee("Google")&&Pe<537&&!("AudioNode"in window),se=!!window.opera,ae=!_e&&ee("chrome"),Wt=ee("gecko")&&!ve&&!se&&!bt,Ee=!ae&&ee("safari"),Me=ee("phantom"),$t="OTransition"in Bt,ke=navigator.platform.indexOf("Win")===0,X=bt&&"transition"in Bt,ut="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ye,mt="MozPerspective"in Bt,te=!window.L_DISABLE_3D&&(X||ut||mt)&&!$t&&!Me,It=typeof orientation<"u"||ee("mobile"),Se=It&&ve,Rr=It&&ut,Vn=!window.PointerEvent&&window.MSPointerEvent,qn=!!(window.PointerEvent||Vn),jn="ontouchstart"in window||!!window.TouchEvent,Nr=!window.L_NO_TOUCH&&(jn||qn),Zr=It&&se,Ur=It&&Wt,Fr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",y,e),window.removeEventListener("testPassiveEventSupport",y,e)}catch{}return t}(),Gr=function(){return!!document.createElement("canvas").getContext}(),Ai=!!(document.createElementNS&&Nt("svg").createSVGRect),Vr=!!Ai&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),qr=!Ai&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),jr=navigator.platform.indexOf("Mac")===0,Wr=navigator.platform.indexOf("Linux")===0;function ee(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var H={ie:bt,ielt9:xe,edge:_e,webkit:ve,android:ge,android23:ye,androidStock:Te,opera:se,chrome:ae,gecko:Wt,safari:Ee,phantom:Me,opera12:$t,win:ke,ie3d:X,webkit3d:ut,gecko3d:mt,any3d:te,mobile:It,mobileWebkit:Se,mobileWebkit3d:Rr,msPointer:Vn,pointer:qn,touch:Nr,touchNative:jn,mobileOpera:Zr,mobileGecko:Ur,retina:Fr,passiveEvents:Hr,canvas:Gr,svg:Ai,vml:qr,inlineSvg:Vr,mac:jr,linux:Wr},Wn=H.msPointer?"MSPointerDown":"pointerdown",Yn=H.msPointer?"MSPointerMove":"pointermove",Kn=H.msPointer?"MSPointerUp":"pointerup",Xn=H.msPointer?"MSPointerCancel":"pointercancel",zi={touchstart:Wn,touchmove:Yn,touchend:Kn,touchcancel:Xn},$n={touchstart:Qr,touchmove:ci,touchend:ci,touchcancel:ci},Ne={},Jn=!1;function Yr(t,e,i){return e==="touchstart"&&Jr(),$n[e]?(i=$n[e].bind(this,i),t.addEventListener(zi[e],i,!1),i):(console.warn("wrong event specified:",e),y)}function Kr(t,e,i){if(!zi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(zi[e],i,!1)}function Xr(t){Ne[t.pointerId]=t}function $r(t){Ne[t.pointerId]&&(Ne[t.pointerId]=t)}function Qn(t){delete Ne[t.pointerId]}function Jr(){Jn||(document.addEventListener(Wn,Xr,!0),document.addEventListener(Yn,$r,!0),document.addEventListener(Kn,Qn,!0),document.addEventListener(Xn,Qn,!0),Jn=!0)}function ci(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in Ne)e.touches.push(Ne[i]);e.changedTouches=[e],t(e)}}function Qr(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ct(e),ci(t,e)}function ts(t){var e={},i,o;for(o in t)i=t[o],e[o]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var es=200;function is(t,e){t.addEventListener("dblclick",e);var i=0,o;function a(u){if(u.detail!==1){o=u.detail;return}if(!(u.pointerType==="mouse"||u.sourceCapabilities&&!u.sourceCapabilities.firesTouchEvents)){var v=oo(u);if(!(v.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!v.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var b=Date.now();b-i<=es?(o++,o===2&&e(ts(u))):o=1,i=b}}}return t.addEventListener("click",a),{dblclick:e,simDblclick:a}}function ns(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Bi=pi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ye=pi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),to=Ye==="webkitTransition"||Ye==="OTransition"?Ye+"End":"transitionend";function eo(t){return typeof t=="string"?document.getElementById(t):t}function Ke(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return i==="auto"?null:i}function ht(t,e,i){var o=document.createElement(t);return o.className=e||"",i&&i.appendChild(o),o}function Lt(t){var e=t.parentNode;e&&e.removeChild(t)}function di(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ze(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Ue(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Ri(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=fi(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function $(t,e){if(t.classList!==void 0)for(var i=O(e),o=0,a=i.length;o<a;o++)t.classList.add(i[o]);else if(!Ri(t,e)){var u=fi(t);Ni(t,(u?u+" ":"")+e)}}function xt(t,e){t.classList!==void 0?t.classList.remove(e):Ni(t,S((" "+fi(t)+" ").replace(" "+e+" "," ")))}function Ni(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function fi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Yt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&os(t,e)}function os(t,e){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(o)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function pi(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Ce(t,e,i){var o=e||new G(0,0);t.style[Bi]=(H.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}function Pt(t,e){t._leaflet_pos=e,H.any3d?Ce(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function De(t){return t._leaflet_pos||new G(0,0)}var Xe,$e,Zi;if("onselectstart"in document)Xe=function(){K(window,"selectstart",Ct)},$e=function(){_t(window,"selectstart",Ct)};else{var Je=pi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xe=function(){if(Je){var t=document.documentElement.style;Zi=t[Je],t[Je]="none"}},$e=function(){Je&&(document.documentElement.style[Je]=Zi,Zi=void 0)}}function Ui(){K(window,"dragstart",Ct)}function Fi(){_t(window,"dragstart",Ct)}var mi,Hi;function Gi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(_i(),mi=t,Hi=t.style.outlineStyle,t.style.outlineStyle="none",K(window,"keydown",_i))}function _i(){mi&&(mi.style.outlineStyle=Hi,mi=void 0,Hi=void 0,_t(window,"keydown",_i))}function io(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Vi(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var rs={__proto__:null,TRANSFORM:Bi,TRANSITION:Ye,TRANSITION_END:to,get:eo,getStyle:Ke,create:ht,remove:Lt,empty:di,toFront:Ze,toBack:Ue,hasClass:Ri,addClass:$,removeClass:xt,setClass:Ni,getClass:fi,setOpacity:Yt,testProp:pi,setTransform:Ce,setPosition:Pt,getPosition:De,get disableTextSelection(){return Xe},get enableTextSelection(){return $e},disableImageDrag:Ui,enableImageDrag:Fi,preventOutline:Gi,restoreOutline:_i,getSizedParentNode:io,getScale:Vi};function K(t,e,i,o){if(e&&typeof e=="object")for(var a in e)ji(t,a,e[a],i);else{e=O(e);for(var u=0,v=e.length;u<v;u++)ji(t,e[u],i,o)}return this}var ie="_leaflet_events";function _t(t,e,i,o){if(arguments.length===1)no(t),delete t[ie];else if(e&&typeof e=="object")for(var a in e)Wi(t,a,e[a],i);else if(e=O(e),arguments.length===2)no(t,function(b){return et(e,b)!==-1});else for(var u=0,v=e.length;u<v;u++)Wi(t,e[u],i,o);return this}function no(t,e){for(var i in t[ie]){var o=i.split(/\d/)[0];(!e||e(o))&&Wi(t,o,null,null,i)}}var qi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ji(t,e,i,o){var a=e+_(i)+(o?"_"+_(o):"");if(t[ie]&&t[ie][a])return this;var u=function(b){return i.call(o||t,b||window.event)},v=u;!H.touchNative&&H.pointer&&e.indexOf("touch")===0?u=Yr(t,e,u):H.touch&&e==="dblclick"?u=is(t,u):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(qi[e]||e,u,H.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(u=function(b){b=b||window.event,Ki(t,b)&&v(b)},t.addEventListener(qi[e],u,!1)):t.addEventListener(e,v,!1):t.attachEvent("on"+e,u),t[ie]=t[ie]||{},t[ie][a]=u}function Wi(t,e,i,o,a){a=a||e+_(i)+(o?"_"+_(o):"");var u=t[ie]&&t[ie][a];if(!u)return this;!H.touchNative&&H.pointer&&e.indexOf("touch")===0?Kr(t,e,u):H.touch&&e==="dblclick"?ns(t,u):"removeEventListener"in t?t.removeEventListener(qi[e]||e,u,!1):t.detachEvent("on"+e,u),t[ie][a]=null}function Oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Yi(t){return ji(t,"wheel",Oe),this}function Qe(t){return K(t,"mousedown touchstart dblclick contextmenu",Oe),t._leaflet_disable_click=!0,this}function Ct(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ie(t){return Ct(t),Oe(t),this}function oo(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function ro(t,e){if(!e)return new G(t.clientX,t.clientY);var i=Vi(e),o=i.boundingClientRect;return new G((t.clientX-o.left)/i.x-e.clientLeft,(t.clientY-o.top)/i.y-e.clientTop)}var ss=H.linux&&H.chrome?window.devicePixelRatio:H.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function so(t){return H.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ss:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ki(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var as={__proto__:null,on:K,off:_t,stopPropagation:Oe,disableScrollPropagation:Yi,disableClickPropagation:Qe,preventDefault:Ct,stop:Ie,getPropagationPath:oo,getMousePosition:ro,getWheelDelta:so,isExternalTarget:Ki,addListener:K,removeListener:_t},ao=Mt.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=De(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Pt(this._el,i),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),st=Mt.extend({options:{crs:zt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=A(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(J(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ye&&H.any3d&&!H.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),K(this._proxy,to,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(J(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(H.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(H.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var o=this.getZoomScale(e),a=this.getSize().divideBy(2),u=t instanceof G?t:this.latLngToContainerPoint(t),v=u.subtract(a).multiplyBy(1-1/o),b=this.containerPointToLatLng(a.add(v));return this.setView(b,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ct(t);var i=F(e.paddingTopLeft||e.padding||[0,0]),o=F(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,i.add(o));if(a=typeof e.maxZoom=="number"?Math.min(e.maxZoom,a):a,a===1/0)return{center:t.getCenter(),zoom:a};var u=o.subtract(i).divideBy(2),v=this.project(t.getSouthWest(),a),b=this.project(t.getNorthEast(),a),x=this.unproject(v.add(b).divideBy(2).add(u),a);return{center:x,zoom:a}},fitBounds:function(t,e){if(t=ct(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=F(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ao,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){$(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!H.any3d)return this.setView(t,e,i);this._stop();var o=this.project(this.getCenter()),a=this.project(t),u=this.getSize(),v=this._zoom;t=J(t),e=e===void 0?v:e;var b=Math.max(u.x,u.y),x=b*this.getZoomScale(v,e),k=a.distanceTo(o)||1,R=1.42,V=R*R;function tt(Tt){var ki=Tt?-1:1,Ks=Tt?x:b,Xs=x*x-b*b+ki*V*V*k*k,$s=2*Ks*V*k,an=Xs/$s,Ho=Math.sqrt(an*an+1)-an,Js=Ho<1e-9?-18:Math.log(Ho);return Js}function Rt(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function kt(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}function Xt(Tt){return Rt(Tt)/kt(Tt)}var Ut=tt(0);function je(Tt){return b*(kt(Ut)/kt(Ut+R*Tt))}function qs(Tt){return b*(kt(Ut)*Xt(Ut+R*Tt)-Rt(Ut))/V}function js(Tt){return 1-Math.pow(1-Tt,1.5)}var Ws=Date.now(),Uo=(tt(1)-Ut)/R,Ys=i.duration?1e3*i.duration:1e3*Uo*.8;function Fo(){var Tt=(Date.now()-Ws)/Ys,ki=js(Tt)*Uo;Tt<=1?(this._flyToFrame=D(Fo,this),this._move(this.unproject(o.add(a.subtract(o).multiplyBy(qs(ki)/k)),v),this.getScaleZoom(b/je(ki),v),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),Fo.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=ct(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,ct(t));return i.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=F(e.paddingTopLeft||e.padding||[0,0]),o=F(e.paddingBottomRight||e.padding||[0,0]),a=this.project(this.getCenter()),u=this.project(t),v=this.getPixelBounds(),b=yt([v.min.add(i),v.max.subtract(o)]),x=b.getSize();if(!b.contains(u)){this._enforcingBounds=!0;var k=u.subtract(b.getCenter()),R=b.extend(u).getSize().subtract(x);a.x+=k.x<0?-R.x:R.x,a.y+=k.y<0?-R.y:R.y,this.panTo(this.unproject(a),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),a=i.divideBy(2).round(),u=o.subtract(a);return!u.x&&!u.y?this:(t.animate&&t.pan?this.panBy(u):(t.pan&&this._rawPanBy(u),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,o=new ot(e,i),a=o.toBounds(t.coords.accuracy*2),u=this._locateOptions;if(u.setView){var v=this.getBoundsZoom(a);this.setView(o,u.maxZoom?Math.min(v,u.maxZoom):v)}var b={latlng:o,bounds:a,timestamp:t.timestamp};for(var x in t.coords)typeof t.coords[x]=="number"&&(b[x]=t.coords[x]);this.fire("locationfound",b)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Lt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=ht("div",i,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new vt(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=ct(t),i=F(i||[0,0]);var o=this.getZoom()||0,a=this.getMinZoom(),u=this.getMaxZoom(),v=t.getNorthWest(),b=t.getSouthEast(),x=this.getSize().subtract(i),k=yt(this.project(b,o),this.project(v,o)).getSize(),R=H.any3d?this.options.zoomSnap:1,V=x.x/k.x,tt=x.y/k.y,Rt=e?Math.max(V,tt):Math.min(V,tt);return o=this.getScaleZoom(Rt,o),R&&(o=Math.round(o/(R/100))*(R/100),o=e?Math.ceil(o/R)*R:Math.floor(o/R)*R),Math.max(a,Math.min(u,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new Q(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var o=i.zoom(t*i.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(J(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(F(t),e)},layerPointToLatLng:function(t){var e=F(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(J(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(J(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ct(t))},distance:function(t,e){return this.options.crs.distance(J(t),J(e))},containerPointToLayerPoint:function(t){return F(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return F(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(F(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(t)))},mouseEventToContainerPoint:function(t){return ro(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=eo(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");K(e,"scroll",this._onScroll,this),this._containerId=_(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&H.any3d,$(t,"leaflet-container"+(H.touch?" leaflet-touch":"")+(H.retina?" leaflet-retina":"")+(H.ielt9?" leaflet-oldie":"")+(H.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Ke(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pt(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||($(t.markerPane,"leaflet-zoom-hide"),$(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){Pt(this._mapPane,new G(0,0));var o=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var a=this._zoom!==e;this._moveStart(a,i)._move(t,e)._moveEnd(a),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,o){e===void 0&&(e=this._zoom);var a=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),o?i&&i.pinch&&this.fire("zoom",i):((a||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Pt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var e=t?_t:K;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),H.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],o,a=e==="mouseout"||e==="mouseover",u=t.target||t.srcElement,v=!1;u;){if(o=this._targets[_(u)],o&&(e==="click"||e==="preclick")&&this._draggableMoved(o)){v=!0;break}if(o&&o.listens(e,!0)&&(a&&!Ki(u,t)||(i.push(o),a))||u===this._container)break;u=u.parentNode}return!i.length&&!v&&!a&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&Gi(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}var a=this._findEventTargets(t,e);if(i){for(var u=[],v=0;v<i.length;v++)i[v].listens(e,!0)&&u.push(i[v]);a=u.concat(a)}if(a.length){e==="contextmenu"&&Ct(t);var b=a[0],x={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var k=b.getLatLng&&(!b._radius||b._radius<=10);x.containerPoint=k?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(t),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=k?b.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(v=0;v<a.length;v++)if(a[v].fire(e,x,!0),x.originalEvent._stopped||a[v].options.bubblingMouseEvents===!1&&et(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return De(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return yt([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var o=this.project(t,e),a=this.getSize().divideBy(2),u=new Q(o.subtract(a),o.add(a)),v=this._getBoundsOffset(u,i,e);return Math.abs(v.x)<=1&&Math.abs(v.y)<=1?t:this.unproject(o.add(v),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),o=new Q(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,i){var o=yt(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),a=o.min.subtract(t.min),u=o.max.subtract(t.max),v=this._rebound(a.x,-u.x),b=this._rebound(a.y,-u.y);return new G(v,b)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),o=H.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=Bi,o=this._proxy.style[i];Ce(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Ce(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/o);return i.animate!==!0&&!this.getSize().contains(a)?!1:(D(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,$(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ls(t,e){return new st(t,e)}var Jt=q.extend({options:{position:"topright"},initialize:function(t){A(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return $(e,"leaflet-control"),i.indexOf("bottom")!==-1?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ti=function(t){return new Jt(t)};st.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ht("div",e+"control-container",this._container);function o(a,u){var v=e+a+" "+e+u;t[a+u]=ht("div",v,i)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Lt(this._controlCorners[t]);Lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var lo=Jt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,o){return i<o?-1:o<i?1:0}},initialize:function(t,e,i){A(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Jt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(_(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){$(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?($(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ht("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Qe(e),Yi(e);var o=this._section=ht("section",t+"-list");i&&(this._map.on("click",this.collapse,this),K(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=ht("a",t+"-toggle",e);a.href="#",a.title="Layers",a.setAttribute("role","button"),K(a,{keydown:function(u){u.keyCode===13&&this._expandSafely()},click:function(u){Ct(u),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=ht("div",t+"-base",o),this._separator=ht("div",t+"-separator",o),this._overlaysList=ht("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&_(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(s(function(o,a){return this.options.sortFunction(o.layer,a.layer,o.name,a.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;di(this._baseLayersList),di(this._overlaysList),this._layerControlInputs=[];var t,e,i,o,a=0;for(i=0;i<this._layers.length;i++)o=this._layers[i],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,a+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&a>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),o;t.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=i):o=this._createRadioElement("leaflet-base-layers_"+_(this),i),this._layerControlInputs.push(o),o.layerId=_(t.layer),K(o,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var u=document.createElement("span");e.appendChild(u),u.appendChild(o),u.appendChild(a);var v=t.overlay?this._overlaysList:this._baseLayersList;return v.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,o=[],a=[];this._handlingClick=!0;for(var u=t.length-1;u>=0;u--)e=t[u],i=this._getLayer(e.layerId).layer,e.checked?o.push(i):e.checked||a.push(i);for(u=0;u<a.length;u++)this._map.hasLayer(a[u])&&this._map.removeLayer(a[u]);for(u=0;u<o.length;u++)this._map.hasLayer(o[u])||this._map.addLayer(o[u]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,o=this._map.getZoom(),a=t.length-1;a>=0;a--)e=t[a],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&o<i.options.minZoom||i.options.maxZoom!==void 0&&o>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,K(t,"click",Ct),this.expand();var e=this;setTimeout(function(){_t(t,"click",Ct),e._preventClick=!1})}}),hs=function(t,e,i){return new lo(t,e,i)},Xi=Jt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ht("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,o,a){var u=ht("a",i,o);return u.innerHTML=t,u.href="#",u.title=e,u.setAttribute("role","button"),u.setAttribute("aria-label",e),Qe(u),K(u,"click",Ie),K(u,"click",a,this),K(u,"click",this._refocusOnMap,this),u},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";xt(this._zoomInButton,e),xt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&($(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&($(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});st.mergeOptions({zoomControl:!0}),st.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xi,this.addControl(this.zoomControl))});var us=function(t){return new Xi(t)},ho=Jt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ht("div",e),o=this.options;return this._addScales(o,e+"-line",i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ht("div",e,i)),t.imperial&&(this._iScale=ht("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,o,a;e>5280?(i=e/5280,o=this._getRoundNum(i),this._updateScale(this._iScale,o+" mi",o/i)):(a=this._getRoundNum(e),this._updateScale(this._iScale,a+" ft",a/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),cs=function(t){return new ho(t)},ds='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$i=Jt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(H.inlineSvg?ds+" ":"")+"Leaflet</a>"},initialize:function(t){A(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ht("div","leaflet-control-attribution"),Qe(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});st.mergeOptions({attributionControl:!0}),st.addInitHook(function(){this.options.attributionControl&&new $i().addTo(this)});var fs=function(t){return new $i(t)};Jt.Layers=lo,Jt.Zoom=Xi,Jt.Scale=ho,Jt.Attribution=$i,ti.layers=hs,ti.zoom=us,ti.scale=cs,ti.attribution=fs;var ne=q.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ne.addTo=function(t,e){return t.addHandler(e,this),this};var ps={Events:at},uo=H.touch?"touchstart mousedown":"mousedown",Le=Mt.extend({options:{clickTolerance:3},initialize:function(t,e,i,o){A(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(K(this._dragStartTarget,uo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Le._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,uo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ri(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Le._dragging===this&&this.finishDrag();return}if(!(Le._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Le._dragging=this,this._preventOutline&&Gi(this._element),Ui(),Xe(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=io(this._element);this._startPoint=new G(e.clientX,e.clientY),this._startPos=De(this._element),this._parentScale=Vi(i);var o=t.type==="mousedown";K(document,o?"mousemove":"touchmove",this._onMove,this),K(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new G(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ct(t),this._moved||(this.fire("dragstart"),this._moved=!0,$(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),$(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Pt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){xt(document.body,"leaflet-dragging"),this._lastTarget&&(xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),Fi(),$e();var e=this._moved&&this._moving;this._moving=!1,Le._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function co(t,e,i){var o,a=[1,4,2,8],u,v,b,x,k,R,V,tt;for(u=0,R=t.length;u<R;u++)t[u]._code=Ae(t[u],e);for(b=0;b<4;b++){for(V=a[b],o=[],u=0,R=t.length,v=R-1;u<R;v=u++)x=t[u],k=t[v],x._code&V?k._code&V||(tt=vi(k,x,V,e,i),tt._code=Ae(tt,e),o.push(tt)):(k._code&V&&(tt=vi(k,x,V,e,i),tt._code=Ae(tt,e),o.push(tt)),o.push(x));t=o}return t}function fo(t,e){var i,o,a,u,v,b,x,k,R;if(!t||t.length===0)throw new Error("latlngs not passed");Kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var V=J([0,0]),tt=ct(t),Rt=tt.getNorthWest().distanceTo(tt.getSouthWest())*tt.getNorthEast().distanceTo(tt.getNorthWest());Rt<1700&&(V=Ji(t));var kt=t.length,Xt=[];for(i=0;i<kt;i++){var Ut=J(t[i]);Xt.push(e.project(J([Ut.lat-V.lat,Ut.lng-V.lng])))}for(b=x=k=0,i=0,o=kt-1;i<kt;o=i++)a=Xt[i],u=Xt[o],v=a.y*u.x-u.y*a.x,x+=(a.x+u.x)*v,k+=(a.y+u.y)*v,b+=v*3;b===0?R=Xt[0]:R=[x/b,k/b];var je=e.unproject(F(R));return J([je.lat+V.lat,je.lng+V.lng])}function Ji(t){for(var e=0,i=0,o=0,a=0;a<t.length;a++){var u=J(t[a]);e+=u.lat,i+=u.lng,o++}return J([e/o,i/o])}var ms={__proto__:null,clipPolygon:co,polygonCenter:fo,centroid:Ji};function po(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=gs(t,i),t=vs(t,i),t}function mo(t,e,i){return Math.sqrt(ei(t,e,i,!0))}function _s(t,e,i){return ei(t,e,i)}function vs(t,e){var i=t.length,o=typeof Uint8Array<"u"?Uint8Array:Array,a=new o(i);a[0]=a[i-1]=1,Qi(t,a,e,0,i-1);var u,v=[];for(u=0;u<i;u++)a[u]&&v.push(t[u]);return v}function Qi(t,e,i,o,a){var u=0,v,b,x;for(b=o+1;b<=a-1;b++)x=ei(t[b],t[o],t[a],!0),x>u&&(v=b,u=x);u>i&&(e[v]=1,Qi(t,e,i,o,v),Qi(t,e,i,v,a))}function gs(t,e){for(var i=[t[0]],o=1,a=0,u=t.length;o<u;o++)ys(t[o],t[a])>e&&(i.push(t[o]),a=o);return a<u-1&&i.push(t[u-1]),i}var _o;function vo(t,e,i,o,a){var u=o?_o:Ae(t,i),v=Ae(e,i),b,x,k;for(_o=v;;){if(!(u|v))return[t,e];if(u&v)return!1;b=u||v,x=vi(t,e,b,i,a),k=Ae(x,i),b===u?(t=x,u=k):(e=x,v=k)}}function vi(t,e,i,o,a){var u=e.x-t.x,v=e.y-t.y,b=o.min,x=o.max,k,R;return i&8?(k=t.x+u*(x.y-t.y)/v,R=x.y):i&4?(k=t.x+u*(b.y-t.y)/v,R=b.y):i&2?(k=x.x,R=t.y+v*(x.x-t.x)/u):i&1&&(k=b.x,R=t.y+v*(b.x-t.x)/u),new G(k,R,a)}function Ae(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function ys(t,e){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o}function ei(t,e,i,o){var a=e.x,u=e.y,v=i.x-a,b=i.y-u,x=v*v+b*b,k;return x>0&&(k=((t.x-a)*v+(t.y-u)*b)/x,k>1?(a=i.x,u=i.y):k>0&&(a+=v*k,u+=b*k)),v=t.x-a,b=t.y-u,o?v*v+b*b:new G(a,u)}function Kt(t){return!U(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function go(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kt(t)}function yo(t,e){var i,o,a,u,v,b,x,k;if(!t||t.length===0)throw new Error("latlngs not passed");Kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var R=J([0,0]),V=ct(t),tt=V.getNorthWest().distanceTo(V.getSouthWest())*V.getNorthEast().distanceTo(V.getNorthWest());tt<1700&&(R=Ji(t));var Rt=t.length,kt=[];for(i=0;i<Rt;i++){var Xt=J(t[i]);kt.push(e.project(J([Xt.lat-R.lat,Xt.lng-R.lng])))}for(i=0,o=0;i<Rt-1;i++)o+=kt[i].distanceTo(kt[i+1])/2;if(o===0)k=kt[0];else for(i=0,u=0;i<Rt-1;i++)if(v=kt[i],b=kt[i+1],a=v.distanceTo(b),u+=a,u>o){x=(u-o)/a,k=[b.x-x*(b.x-v.x),b.y-x*(b.y-v.y)];break}var Ut=e.unproject(F(k));return J([Ut.lat+R.lat,Ut.lng+R.lng])}var Ls={__proto__:null,simplify:po,pointToSegmentDistance:mo,closestPointOnSegment:_s,clipSegment:vo,_getEdgeIntersection:vi,_getBitCode:Ae,_sqClosestPointOnSegment:ei,isFlat:Kt,_flat:go,polylineCenter:yo},tn={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new ot(t.y,t.x)},bounds:new Q([-180,-90],[180,90])},en={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,o=t.lat*e,a=this.R_MINOR/i,u=Math.sqrt(1-a*a),v=u*Math.sin(o),b=Math.tan(Math.PI/4-o/2)/Math.pow((1-v)/(1+v),u/2);return o=-i*Math.log(Math.max(b,1e-10)),new G(t.lng*e*i,o)},unproject:function(t){for(var e=180/Math.PI,i=this.R,o=this.R_MINOR/i,a=Math.sqrt(1-o*o),u=Math.exp(-t.y/i),v=Math.PI/2-2*Math.atan(u),b=0,x=.1,k;b<15&&Math.abs(x)>1e-7;b++)k=a*Math.sin(v),k=Math.pow((1-k)/(1+k),a/2),x=Math.PI/2-2*Math.atan(u*k)-v,v+=x;return new ot(v*e,t.x*e/i)}},ws={__proto__:null,LonLat:tn,Mercator:en,SphericalMercator:ft},bs=n({},it,{code:"EPSG:3395",projection:en,transformation:function(){var t=.5/(Math.PI*en.R);return lt(t,.5,-t,.5)}()}),Lo=n({},it,{code:"EPSG:4326",projection:tn,transformation:lt(1/180,1,-1/180,.5)}),xs=n({},T,{projection:tn,transformation:lt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(i*i+o*o)},infinite:!0});T.Earth=it,T.EPSG3395=bs,T.EPSG3857=zt,T.EPSG900913=Gt,T.EPSG4326=Lo,T.Simple=xs;var Qt=Mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});st.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=_(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=_(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?U(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=_(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var o in this._zoomBoundLayers){var a=this._zoomBoundLayers[o].options;t=a.minZoom===void 0?t:Math.min(t,a.minZoom),e=a.maxZoom===void 0?e:Math.max(e,a.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fe=Qt.extend({initialize:function(t,e){A(this,e),this._layers={};var i,o;if(t)for(i=0,o=t.length;i<o;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,o;for(i in this._layers)o=this._layers[i],o[t]&&o[t].apply(o,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),Ps=function(t,e){return new Fe(t,e)},le=Fe.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Fe.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Fe.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new vt;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Ts=function(t,e){return new le(t,e)},He=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){A(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(o,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(t,e){var i=this.options,o=i[e+"Size"];typeof o=="number"&&(o=[o,o]);var a=F(o),u=F(e==="shadow"&&i.shadowAnchor||i.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),u&&(t.style.marginLeft=-u.x+"px",t.style.marginTop=-u.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return H.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Es(t){return new He(t)}var ii=He.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ii.imagePath!="string"&&(ii.imagePath=this._detectIconPath()),(this.options.imagePath||ii.imagePath)+He.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,o,a){var u=o.exec(i);return u&&u[a]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ht("div","leaflet-default-icon-path",document.body),e=Ke(t,"background-image")||Ke(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),wo=ne.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Le(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),$(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,o=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,u=De(e._icon),v=i.getPixelBounds(),b=i.getPixelOrigin(),x=yt(v.min._subtract(b).add(a),v.max._subtract(b).subtract(a));if(!x.contains(u)){var k=F((Math.max(x.max.x,u.x)-x.max.x)/(v.max.x-x.max.x)-(Math.min(x.min.x,u.x)-x.min.x)/(v.min.x-x.min.x),(Math.max(x.max.y,u.y)-x.max.y)/(v.max.y-x.max.y)-(Math.min(x.min.y,u.y)-x.min.y)/(v.min.y-x.min.y)).multiplyBy(o);i.panBy(k,{animate:!1}),this._draggable._newPos._add(k),this._draggable._startPos._add(k),Pt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=D(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,o=De(e._icon),a=e._map.layerPointToLatLng(o);i&&Pt(i,o),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),gi=Qt.extend({options:{icon:new ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){A(this,e),this._latlng=J(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=J(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),$(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&K(i,"focus",this._panOnFocus,this);var a=t.icon.createShadow(this._shadow),u=!1;a!==this._shadow&&(this._removeShadow(),u=!0),a&&($(a,e),a.alt=""),this._shadow=a,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&u&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),Lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Lt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Pt(this._icon,t),this._shadow&&Pt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&($(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Yt(this._icon,t),this._shadow&&Yt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?F(e.iconSize):F(0,0),o=e.iconAnchor?F(e.iconAnchor):F(0,0);t.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:i.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ms(t,e){return new gi(t,e)}var we=Qt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return A(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),yi=we.extend({options:{fill:!0,radius:10},initialize:function(t,e){A(this,e),this._latlng=J(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=J(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return we.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),o=[t+i,e+i];this._pxBounds=new Q(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ks(t,e){return new yi(t,e)}var nn=yi.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=n({},i,{radius:e})),A(this,e),this._latlng=J(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new vt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:we.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,o=i.options.crs;if(o.distance===it.distance){var a=Math.PI/180,u=this._mRadius/it.R/a,v=i.project([e+u,t]),b=i.project([e-u,t]),x=v.add(b).divideBy(2),k=i.unproject(x).lat,R=Math.acos((Math.cos(u*a)-Math.sin(e*a)*Math.sin(k*a))/(Math.cos(e*a)*Math.cos(k*a)))/a;(isNaN(R)||R===0)&&(R=u/Math.cos(Math.PI/180*e)),this._point=x.subtract(i.getPixelOrigin()),this._radius=isNaN(R)?0:x.x-i.project([k,t-R]).x,this._radiusY=x.y-v.y}else{var V=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(V).x}this._updateBounds()}});function Ss(t,e,i){return new nn(t,e,i)}var he=we.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){A(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,o=ei,a,u,v=0,b=this._parts.length;v<b;v++)for(var x=this._parts[v],k=1,R=x.length;k<R;k++){a=x[k-1],u=x[k];var V=o(t,a,u,!0);V<e&&(e=V,i=o(t,a,u))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=J(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new vt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Kt(t),o=0,a=t.length;o<a;o++)i?(e[o]=J(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new G(t,t);this._rawPxBounds&&(this._pxBounds=new Q([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var o=t[0]instanceof ot,a=t.length,u,v;if(o){for(v=[],u=0;u<a;u++)v[u]=this._map.latLngToLayerPoint(t[u]),i.extend(v[u]);e.push(v)}else for(u=0;u<a;u++)this._projectLatlngs(t[u],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,o,a,u,v,b,x;for(i=0,a=0,u=this._rings.length;i<u;i++)for(x=this._rings[i],o=0,v=x.length;o<v-1;o++)b=vo(x[o],x[o+1],t,o,!0),b&&(e[a]=e[a]||[],e[a].push(b[0]),(b[1]!==x[o+1]||o===v-2)&&(e[a].push(b[1]),a++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,o=t.length;i<o;i++)t[i]=po(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,o,a,u,v,b,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,u=this._parts.length;i<u;i++)for(b=this._parts[i],o=0,v=b.length,a=v-1;o<v;a=o++)if(!(!e&&o===0)&&mo(t,b[a],b[o])<=x)return!0;return!1}});function Cs(t,e){return new he(t,e)}he._flat=go;var Ge=he.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=he.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof ot&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){he.prototype._setLatLngs.call(this,t),Kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new G(e,e);if(t=new Q(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,a=this._rings.length,u;o<a;o++)u=co(this._rings[o],t,!0),u.length&&this._parts.push(u)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,o,a,u,v,b,x,k;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,x=this._parts.length;u<x;u++)for(i=this._parts[u],v=0,k=i.length,b=k-1;v<k;b=v++)o=i[v],a=i[b],o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(e=!e);return e||he.prototype._containsPoint.call(this,t,!0)}});function Ds(t,e){return new Ge(t,e)}var ue=le.extend({initialize:function(t,e){A(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=U(t)?t:t.features,i,o,a;if(e){for(i=0,o=e.length;i<o;i++)a=e[i],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var u=this.options;if(u.filter&&!u.filter(t))return this;var v=Li(t,u);return v?(v.feature=xi(t),v.defaultOptions=v.options,this.resetStyle(v),u.onEachFeature&&u.onEachFeature(t,v),this.addLayer(v)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Li(t,e){var i=t.type==="Feature"?t.geometry:t,o=i?i.coordinates:null,a=[],u=e&&e.pointToLayer,v=e&&e.coordsToLatLng||on,b,x,k,R;if(!o&&!i)return null;switch(i.type){case"Point":return b=v(o),bo(u,t,b,e);case"MultiPoint":for(k=0,R=o.length;k<R;k++)b=v(o[k]),a.push(bo(u,t,b,e));return new le(a);case"LineString":case"MultiLineString":return x=wi(o,i.type==="LineString"?0:1,v),new he(x,e);case"Polygon":case"MultiPolygon":return x=wi(o,i.type==="Polygon"?1:2,v),new Ge(x,e);case"GeometryCollection":for(k=0,R=i.geometries.length;k<R;k++){var V=Li({geometry:i.geometries[k],type:"Feature",properties:t.properties},e);V&&a.push(V)}return new le(a);case"FeatureCollection":for(k=0,R=i.features.length;k<R;k++){var tt=Li(i.features[k],e);tt&&a.push(tt)}return new le(a);default:throw new Error("Invalid GeoJSON object.")}}function bo(t,e,i,o){return t?t(e,i):new gi(i,o&&o.markersInheritOptions&&o)}function on(t){return new ot(t[1],t[0],t[2])}function wi(t,e,i){for(var o=[],a=0,u=t.length,v;a<u;a++)v=e?wi(t[a],e-1,i):(i||on)(t[a]),o.push(v);return o}function rn(t,e){return t=J(t),t.alt!==void 0?[E(t.lng,e),E(t.lat,e),E(t.alt,e)]:[E(t.lng,e),E(t.lat,e)]}function bi(t,e,i,o){for(var a=[],u=0,v=t.length;u<v;u++)a.push(e?bi(t[u],Kt(t[u])?0:e-1,i,o):rn(t[u],o));return!e&&i&&a.length>0&&a.push(a[0].slice()),a}function Ve(t,e){return t.feature?n({},t.feature,{geometry:e}):xi(e)}function xi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var sn={toGeoJSON:function(t){return Ve(this,{type:"Point",coordinates:rn(this.getLatLng(),t)})}};gi.include(sn),nn.include(sn),yi.include(sn),he.include({toGeoJSON:function(t){var e=!Kt(this._latlngs),i=bi(this._latlngs,e?1:0,!1,t);return Ve(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),Ge.include({toGeoJSON:function(t){var e=!Kt(this._latlngs),i=e&&!Kt(this._latlngs[0]),o=bi(this._latlngs,i?2:e?1:0,!0,t);return e||(o=[o]),Ve(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})}}),Fe.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),Ve(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",o=[];return this.eachLayer(function(a){if(a.toGeoJSON){var u=a.toGeoJSON(t);if(i)o.push(u.geometry);else{var v=xi(u);v.type==="FeatureCollection"?o.push.apply(o,v.features):o.push(v)}}}),i?Ve(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function xo(t,e){return new ue(t,e)}var Os=xo,Pi=Qt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=ct(e),A(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&($(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ze(this._image),this},bringToBack:function(){return this._map&&Ue(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ct(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:ht("img");if($(e,"leaflet-image-layer"),this._zoomAnimated&&$(e,"leaflet-zoom-animated"),this.options.className&&$(e,this.options.className),e.onselectstart=y,e.onmousemove=y,e.onload=s(this.fire,this,"load"),e.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ce(this._image,i,e)},_reset:function(){var t=this._image,e=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Pt(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Is=function(t,e,i){return new Pi(t,e,i)},Po=Pi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:ht("video");if($(e,"leaflet-image-layer"),this._zoomAnimated&&$(e,"leaflet-zoom-animated"),this.options.className&&$(e,this.options.className),e.onselectstart=y,e.onmousemove=y,e.onloadeddata=s(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),o=[],a=0;a<i.length;a++)o.push(i[a].src);this._url=i.length>0?o:[e.src];return}U(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var u=0;u<this._url.length;u++){var v=ht("source");v.src=this._url[u],e.appendChild(v)}}});function As(t,e,i){return new Po(t,e,i)}var To=Pi.extend({_initImage:function(){var t=this._image=this._url;$(t,"leaflet-image-layer"),this._zoomAnimated&&$(t,"leaflet-zoom-animated"),this.options.className&&$(t,this.options.className),t.onselectstart=y,t.onmousemove=y}});function zs(t,e,i){return new To(t,e,i)}var oe=Qt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof ot||U(t))?(this._latlng=J(t),A(this,e)):(A(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Yt(this._container,1),this.bringToFront(),this.options.interactive&&($(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Yt(this._container,0),this._removeTimeout=setTimeout(s(Lt,void 0,this._container),200)):Lt(this._container),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=J(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ze(this._container),this},bringToBack:function(){return this._map&&Ue(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof le){e=null;var i=this._source._layers;for(var o in i)if(i[o]._map){e=i[o];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=F(this.options.offset),i=this._getAnchor();this._zoomAnimated?Pt(this._container,t.add(i)):e=e.add(t).add(i);var o=this._containerBottom=-e.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});st.include({_initOverlay:function(t,e,i,o){var a=e;return a instanceof t||(a=new t(o).setContent(e)),i&&a.setLatLng(i),a}}),Qt.include({_initOverlay:function(t,e,i,o){var a=i;return a instanceof t?(A(a,o),a._source=this):(a=e&&!o?e:new t(o,this),a.setContent(i)),a}});var Ti=oe.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,oe.prototype.openOn.call(this,t)},onAdd:function(t){oe.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof we||this._source.on("preclick",Oe))},onRemove:function(t){oe.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof we||this._source.off("preclick",Oe))},getEvents:function(){var t=oe.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=ht("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ht("div",t+"-content-wrapper",e);if(this._contentNode=ht("div",t+"-content",i),Qe(e),Yi(this._contentNode),K(e,"contextmenu",Oe),this._tipContainer=ht("div",t+"-tip-container",e),this._tip=ht("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=ht("a",t+"-close-button",e);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',K(o,"click",function(a){Ct(a),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,a=this.options.maxHeight,u="leaflet-popup-scrolled";a&&o>a?(e.height=a+"px",$(t,u)):xt(t,u),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Pt(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Ke(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,o=this._containerWidth,a=new G(this._containerLeft,-i-this._containerBottom);a._add(De(this._container));var u=t.layerPointToContainerPoint(a),v=F(this.options.autoPanPadding),b=F(this.options.autoPanPaddingTopLeft||v),x=F(this.options.autoPanPaddingBottomRight||v),k=t.getSize(),R=0,V=0;u.x+o+x.x>k.x&&(R=u.x+o-k.x+x.x),u.x-R-b.x<0&&(R=u.x-b.x),u.y+i+x.y>k.y&&(V=u.y+i-k.y+x.y),u.y-V-b.y<0&&(V=u.y-b.y),(R||V)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([R,V]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bs=function(t,e){return new Ti(t,e)};st.mergeOptions({closePopupOnClick:!0}),st.include({openPopup:function(t,e,i){return this._initOverlay(Ti,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Qt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Ti,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof le||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Ie(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof we)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ei=oe.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){oe.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){oe.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=oe.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ht("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,o=this._map,a=this._container,u=o.latLngToContainerPoint(o.getCenter()),v=o.layerPointToContainerPoint(t),b=this.options.direction,x=a.offsetWidth,k=a.offsetHeight,R=F(this.options.offset),V=this._getAnchor();b==="top"?(e=x/2,i=k):b==="bottom"?(e=x/2,i=0):b==="center"?(e=x/2,i=k/2):b==="right"?(e=0,i=k/2):b==="left"?(e=x,i=k/2):v.x<u.x?(b="right",e=0,i=k/2):(b="left",e=x+(R.x+V.x)*2,i=k/2),t=t.subtract(F(e,i,!0)).add(R).add(V),xt(a,"leaflet-tooltip-right"),xt(a,"leaflet-tooltip-left"),xt(a,"leaflet-tooltip-top"),xt(a,"leaflet-tooltip-bottom"),$(a,"leaflet-tooltip-"+b),Pt(a,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Yt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Rs=function(t,e){return new Ei(t,e)};st.include({openTooltip:function(t,e,i){return this._initOverlay(Ei,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Qt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ei,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof le||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(K(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),K(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,o;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(e)}});var Eo=He.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(di(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var o=F(i.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ns(t){return new Eo(t)}He.Default=ii;var ni=Qt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:H.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){A(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Lt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ze(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ue(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),o=0,a=e.length,u;o<a;o++)u=e[o].style.zIndex,e[o]!==this._container&&u&&(i=t(i,+u));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!H.ielt9){Yt(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var o in this._tiles){var a=this._tiles[o];if(!(!a.current||!a.loaded)){var u=Math.min(1,(t-a.loaded)/200);Yt(a.el,u),u<1?e=!0:(a.active?i=!0:this._onOpaqueTile(a),a.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(Lt(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var o=this._levels[t],a=this._map;return o||(o=this._levels[t]={},o.el=ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,a.getCenter(),a.getZoom()),y(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Lt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,o){var a=Math.floor(t/2),u=Math.floor(e/2),v=i-1,b=new G(+a,+u);b.z=+v;var x=this._tileCoordsToKey(b),k=this._tiles[x];return k&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),v>o?this._retainParent(a,u,v,o):!1)},_retainChildren:function(t,e,i,o){for(var a=2*t;a<2*t+2;a++)for(var u=2*e;u<2*e+2;u++){var v=new G(a,u);v.z=i+1;var b=this._tileCoordsToKey(v),x=this._tiles[b];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);i+1<o&&this._retainChildren(a,u,i+1,o)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,o){var a=Math.round(e);this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a);var u=this.options.updateWhenZooming&&a!==this._tileZoom;(!o||u)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var o=this._map.getZoomScale(i,t.zoom),a=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,i)).round();H.any3d?Ce(t.el,a,o):Pt(t.el,a)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),o=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(i,this._tileZoom),a=e.project(t,this._tileZoom).floor(),u=e.getSize().divideBy(o*2);return new Q(a.subtract(u),a.add(u))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(o),u=a.getCenter(),v=[],b=this.options.keepBuffer,x=new Q(a.getBottomLeft().subtract([b,-b]),a.getTopRight().add([b,-b]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var k in this._tiles){var R=this._tiles[k].coords;(R.z!==this._tileZoom||!x.contains(new G(R.x,R.y)))&&(this._tiles[k].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var V=a.min.y;V<=a.max.y;V++)for(var tt=a.min.x;tt<=a.max.x;tt++){var Rt=new G(tt,V);if(Rt.z=this._tileZoom,!!this._isValidTile(Rt)){var kt=this._tiles[this._tileCoordsToKey(Rt)];kt?kt.current=!0:v.push(Rt)}}if(v.sort(function(Ut,je){return Ut.distanceTo(u)-je.distanceTo(u)}),v.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xt=document.createDocumentFragment();for(tt=0;tt<v.length;tt++)this._addTile(v[tt],Xt);this._level.el.appendChild(Xt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return ct(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),o=t.scaleBy(i),a=o.add(i),u=e.unproject(o,t.z),v=e.unproject(a,t.z);return[u,v]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new vt(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new G(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(Lt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){$(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=y,t.onmousemove=y,H.ielt9&&this.options.opacity<1&&Yt(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&D(s(this._tileReady,this,t,null,a)),Pt(a,i),this._tiles[o]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);i=this._tiles[o],i&&(i.loaded=+new Date,this._map._fadeAnimated?(Yt(i.el,0),B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||($(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),H.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new G(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new Q(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Zs(t){return new ni(t)}var qe=ni.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=A(this,e),e.detectRetina&&H.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return K(i,"load",s(this._tileOnLoad,this,e,i)),K(i,"error",s(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:H.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return Z(this._url,n(e,this.options))},_tileOnLoad:function(t,e){H.ielt9?setTimeout(s(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,o=this.options.zoomOffset;return i&&(t=e-t),t+o},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=y,e.onerror=y,!e.complete)){e.src=rt;var i=this._tiles[t].coords;Lt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",rt),ni.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===rt))return ni.prototype._tileReady.call(this,t,e,i)}});function Mo(t,e){return new qe(t,e)}var ko=qe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);e=A(this,e);var a=e.detectRetina&&H.retina?2:1,u=this.getTileSize();i.width=u.x*a,i.height=u.y*a,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,qe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,o=yt(i.project(e[0]),i.project(e[1])),a=o.min,u=o.max,v=(this._wmsVersion>=1.3&&this._crs===Lo?[a.y,a.x,u.y,u.x]:[a.x,a.y,u.x,u.y]).join(","),b=qe.prototype.getTileUrl.call(this,t);return b+z(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+v},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function Us(t,e){return new ko(t,e)}qe.WMS=ko,Mo.wms=Us;var ce=Qt.extend({options:{padding:.1},initialize:function(t){A(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),$(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),u=o.multiplyBy(-i).add(a).subtract(this._map._getNewPixelOrigin(t,e));H.any3d?Ce(this._container,u,i):Pt(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new Q(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),So=ce.extend({options:{tolerance:0},getEvents:function(){var t=ce.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ce.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");K(t,"mousemove",this._onMouseMove,this),K(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),K(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Lt(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ce.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),o=H.retina?2:1;Pt(e,t.min),e.width=o*i.x,e.height=o*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",H.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ce.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,o=e.prev;i?i.prev=o:this._drawLast=o,o?o.next=i:this._drawFirst=i,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],o,a;for(a=0;a<e.length;a++){if(o=Number(e[a]),isNaN(o))return;i.push(o)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,o,a,u,v=t._parts,b=v.length,x=this._ctx;if(b){for(x.beginPath(),i=0;i<b;i++){for(o=0,a=v[i].length;o<a;o++)u=v[i][o],x[o?"lineTo":"moveTo"](u.x,u.y);e&&x.closePath()}this._fillStroke(x,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,o=Math.max(Math.round(t._radius),1),a=(Math.max(Math.round(t._radiusY),1)||o)/o;a!==1&&(i.save(),i.scale(1,a)),i.beginPath(),i.arc(e.x,e.y/a,o,0,Math.PI*2,!1),a!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,o,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(o=i);this._fireEvent(o?[o]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(xt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,o,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(e)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&($(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(i)i.prev=o;else return;o?o.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(o)o.next=i;else return;i?i.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Co(t){return H.canvas?new So(t):null}var oi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fs={_initContainer:function(){this._container=ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ce.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=oi("shape");$(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=oi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Lt(e),t.removeInteractiveTarget(e),delete this._layers[_(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,o=t.options,a=t._container;a.stroked=!!o.stroke,a.filled=!!o.fill,o.stroke?(e||(e=t._stroke=oi("stroke")),a.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=U(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(a.removeChild(e),t._stroke=null),o.fill?(i||(i=t._fill=oi("fill")),a.appendChild(i),i.color=o.fillColor||o.color,i.opacity=o.fillOpacity):i&&(a.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),o=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+o+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ze(t._container)},_bringToBack:function(t){Ue(t._container)}},Mi=H.vml?oi:Nt,ri=ce.extend({_initContainer:function(){this._container=Mi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Mi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Lt(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ce.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Pt(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Mi("path");t.options.className&&$(e,t.options.className),t.options.interactive&&$(e,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Lt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Zt(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),o=Math.max(Math.round(t._radiusY),1)||i,a="a"+i+","+o+" 0 1,0 ",u=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+a+i*2+",0 "+a+-i*2+",0 ";this._setPath(t,u)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ze(t._path)},_bringToBack:function(t){Ue(t._path)}});H.vml&&ri.include(Fs);function Do(t){return H.svg||H.vml?new ri(t):null}st.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Co(t)||Do(t)}});var Oo=Ge.extend({initialize:function(t,e){Ge.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ct(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Hs(t,e){return new Oo(t,e)}ri.create=Mi,ri.pointsToPath=Zt,ue.geometryToLayer=Li,ue.coordsToLatLng=on,ue.coordsToLatLngs=wi,ue.latLngToCoords=rn,ue.latLngsToCoords=bi,ue.getFeature=Ve,ue.asFeature=xi,st.mergeOptions({boxZoom:!0});var Io=ne.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){K(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xe(),Ui(),this._startPoint=this._map.mouseEventToContainerPoint(t),K(document,{contextmenu:Ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ht("div","leaflet-zoom-box",this._container),$(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new Q(this._point,this._startPoint),i=e.getSize();Pt(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(Lt(this._box),xt(this._container,"leaflet-crosshair")),$e(),Fi(),_t(document,{contextmenu:Ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new vt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});st.addInitHook("addHandler","boxZoom",Io),st.mergeOptions({doubleClickZoom:!0});var Ao=ne.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),o=e.options.zoomDelta,a=t.originalEvent.shiftKey?i-o:i+o;e.options.doubleClickZoom==="center"?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});st.addInitHook("addHandler","doubleClickZoom",Ao),st.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zo=ne.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Le(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}$(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xt(this._map._container,"leaflet-grab"),xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ct(this._map.options.maxBounds);this._offsetLimit=yt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,a=(o-e+i)%t+e-i,u=(o+e+i)%t-e-i,v=Math.abs(a+i)<Math.abs(u+i)?a:u;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=v},_onDragEnd:function(t){var e=this._map,i=e.options,o=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),u=(this._lastTime-this._times[0])/1e3,v=i.easeLinearity,b=a.multiplyBy(v/u),x=b.distanceTo([0,0]),k=Math.min(i.inertiaMaxSpeed,x),R=b.multiplyBy(k/x),V=k/(i.inertiaDeceleration*v),tt=R.multiplyBy(-V/2).round();!tt.x&&!tt.y?e.fire("moveend"):(tt=e._limitOffset(tt,e.options.maxBounds),D(function(){e.panBy(tt,{duration:V,easeLinearity:v,noMoveStart:!0,animate:!0})}))}}});st.addInitHook("addHandler","dragging",zo),st.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Bo=ne.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),K(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,o,a;for(o=0,a=i.left.length;o<a;o++)e[i.left[o]]=[-1*t,0];for(o=0,a=i.right.length;o<a;o++)e[i.right[o]]=[t,0];for(o=0,a=i.down.length;o<a;o++)e[i.down[o]]=[0,t];for(o=0,a=i.up.length;o<a;o++)e[i.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,o,a;for(o=0,a=i.zoomIn.length;o<a;o++)e[i.zoomIn[o]]=t;for(o=0,a=i.zoomOut.length;o<a;o++)e[i.zoomOut[o]]=-t},_addHooks:function(){K(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,o;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(o=this._panKeys[e],t.shiftKey&&(o=F(o).multiplyBy(3)),i.options.maxBounds&&(o=i._limitOffset(F(o),i.options.maxBounds)),i.options.worldCopyJump){var a=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(o)));i.panTo(a)}else i.panBy(o)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Ie(t)}}});st.addInitHook("addHandler","keyboard",Bo),st.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ro=ne.extend({addHooks:function(){K(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=so(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),o),Ie(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),a=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,u=i?Math.ceil(a/i)*i:a,v=t._limitZoom(e+(this._delta>0?u:-u))-e;this._delta=0,this._startTime=null,v&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+v):t.setZoomAround(this._lastMousePos,e+v))}});st.addInitHook("addHandler","scrollWheelZoom",Ro);var Gs=600;st.mergeOptions({tapHold:H.touchNative&&H.safari&&H.mobile,tapTolerance:15});var No=ne.extend({addHooks:function(){K(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new G(e.clientX,e.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(K(document,"touchend",Ct),K(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Gs),K(document,"touchend touchcancel contextmenu",this._cancel,this),K(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){_t(document,"touchend",Ct),_t(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new G(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});st.addInitHook("addHandler","tapHold",No),st.mergeOptions({touchZoom:H.touch,bounceAtZoomLimits:!0});var Zo=ne.extend({addHooks:function(){$(this._map._container,"leaflet-touch-zoom"),K(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(o)._divideBy(2))),this._startDist=i.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),K(document,"touchmove",this._onTouchMove,this),K(document,"touchend touchcancel",this._onTouchEnd,this),Ct(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),a=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var u=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(a===1&&u.x===0&&u.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(u),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var v=s(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(v,this,!0),Ct(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});st.addInitHook("addHandler","touchZoom",Zo),st.BoxZoom=Io,st.DoubleClickZoom=Ao,st.Drag=zo,st.Keyboard=Bo,st.ScrollWheelZoom=Ro,st.TapHold=No,st.TouchZoom=Zo,h.Bounds=Q,h.Browser=H,h.CRS=T,h.Canvas=So,h.Circle=nn,h.CircleMarker=yi,h.Class=q,h.Control=Jt,h.DivIcon=Eo,h.DivOverlay=oe,h.DomEvent=as,h.DomUtil=rs,h.Draggable=Le,h.Evented=Mt,h.FeatureGroup=le,h.GeoJSON=ue,h.GridLayer=ni,h.Handler=ne,h.Icon=He,h.ImageOverlay=Pi,h.LatLng=ot,h.LatLngBounds=vt,h.Layer=Qt,h.LayerGroup=Fe,h.LineUtil=Ls,h.Map=st,h.Marker=gi,h.Mixin=ps,h.Path=we,h.Point=G,h.PolyUtil=ms,h.Polygon=Ge,h.Polyline=he,h.Popup=Ti,h.PosAnimation=ao,h.Projection=ws,h.Rectangle=Oo,h.Renderer=ce,h.SVG=ri,h.SVGOverlay=To,h.TileLayer=qe,h.Tooltip=Ei,h.Transformation=pt,h.Util=W,h.VideoOverlay=Po,h.bind=s,h.bounds=yt,h.canvas=Co,h.circle=Ss,h.circleMarker=ks,h.control=ti,h.divIcon=Ns,h.extend=n,h.featureGroup=Ts,h.geoJSON=xo,h.geoJson=Os,h.gridLayer=Zs,h.icon=Es,h.imageOverlay=Is,h.latLng=J,h.latLngBounds=ct,h.layerGroup=Ps,h.map=ls,h.marker=Ms,h.point=F,h.polygon=Ds,h.polyline=Cs,h.popup=Bs,h.rectangle=Hs,h.setOptions=A,h.stamp=_,h.svg=Do,h.svgOverlay=zs,h.tileLayer=Mo,h.tooltip=Rs,h.transformation=lt,h.version=d,h.videoOverlay=As;var Vs=window.L;h.noConflict=function(){return window.L=Vs,this},window.L=h})}(li,li.exports)),li.exports}var ca=Mr();const wt=ea(ca);(function(c,l,h){function d(n,r){for(;(n=n.parentElement)&&!n.classList.contains(r););return n}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(n,r){this._map=n,this._container=n._container,this._overlayPane=n._panes.overlayPane,this._popupPane=n._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(L.DomUtil.disableTextSelection(),n.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var n=this._markers.pop(),r=this._poly,s=r.getLatLngs(),f=s.splice(-1,1)[0];this._poly.setLatLngs(s),this._markerGroup.removeLayer(n),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(f,!1)}},addVertex:function(n){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(n)),this._poly.addLatLng(n),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent),s=this._map.layerPointToLatLng(r);this._currentLatLng=s,this._updateTooltip(s),this._updateGuide(r),this._mouseMarker.setLatLng(s),L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(n,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n),this._clickHandled=!0,this._disableNewMarkers();var r=n.originalEvent,s=r.clientX,f=r.clientY;this._startPoint.call(this,s,f)}},_startPoint:function(n,r){this._mouseDownOrigin=L.point(n,r)},_onMouseUp:function(n){var r=n.originalEvent,s=r.clientX,f=r.clientY;this._endPoint.call(this,s,f,n),this._clickHandled=null},_endPoint:function(n,r,s){if(this._mouseDownOrigin){var f=L.point(n,r).distanceTo(this._mouseDownOrigin),_=this._calculateFinishDistance(s.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(s.latlng),this._finishShape()):_<10&&L.Browser.touch?this._finishShape():Math.abs(f)<9*(c.devicePixelRatio||1)&&this.addVertex(s.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var r,s,f=n.originalEvent;!f.touches||!f.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=f.touches[0].clientX,s=f.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,s),this._endPoint.call(this,r,s,n),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var r;if(this._markers.length>0){var s;if(this.type===L.Draw.Polyline.TYPE)s=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;s=this._markers[0]}var f=this._map.latLngToContainerPoint(s.getLatLng()),_=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(_.getLatLng());r=f.distanceTo(m)}else r=1/0;return r},_updateFinishHandler:function(){var n=this._markers.length;n>1&&this._markers[n-1].on("click",this._finishShape,this),n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var r=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(n){var r=this._markers?this._markers.length:0;r>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),n))},_updateTooltip:function(n){var r=this._getTooltipText();n&&this._tooltip.updatePosition(n),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(n,r){var s,f,_,m=Math.floor(Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))),g=this.options.guidelineDistance,y=this.options.maxGuideLineLength,E=m>y?m-y:g;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));E<m;E+=this.options.guidelineDistance)s=E/m,f={x:Math.floor(n.x*(1-s)+s*r.x),y:Math.floor(n.y*(1-s)+s*r.y)},_=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),_.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(_,f)},_updateGuideColor:function(n){if(this._guidesContainer)for(var r=0,s=this._guidesContainer.childNodes.length;r<s;r++)this._guidesContainer.childNodes[r].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var n,r,s=this.options.showLength;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=s?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),n},_updateRunningMeasure:function(n,r){var s,f,_=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(s=_-(r?2:1),f=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[s].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[s].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=f*(r?1:-1))},_getMeasurementString:function(){var n,r=this._currentLatLng,s=this._markers[this._markers.length-1].getLatLng();return n=L.GeometryUtil.isVersion07x()?s&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(s)*(this.options.factor||1):this._measurementRunningTotal||0:s&&r?this._measurementRunningTotal+this._map.distance(r,s)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(n,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,r){L.Draw.Polyline.prototype.initialize.call(this,n,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;n===1&&this._markers[0].on("click",this._finishShape,this),n>2&&(this._markers[n-1].on("dblclick",this._finishShape,this),n>3&&this._markers[n-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var n,r;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:n,subtext:r}},_getMeasurementString:function(){var n=this._area,r="";return n||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(r+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,r){var s;!this.options.allowIntersection&&this.options.showArea&&(s=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(s)),L.Draw.Polyline.prototype._vertexChanged.call(this,n,r)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),l.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(l,"mouseup",this._onMouseUp,this),L.DomEvent.off(l,"touchend",this._onMouseUp,this),l.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0,this._startLatLng=n.latlng,L.DomEvent.on(l,"mouseup",this._onMouseUp,this).on(l,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(n,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!d(n.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var n,r,s,f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),_=this._shape,m=this.options.showArea;return _&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(n),s=m?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:f.text,subtext:s}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n),this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},_drawShape:function(n){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(n);else var r=this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var r,s=n.latlng,f=this.options.showRadius,_=this.options.metric;if(this._tooltip.updatePosition(s),this._isDrawing){this._drawShape(s),r=this._shape.getRadius().toFixed(1);var m="";f&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,_,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(n,r){this._marker=n,L.setOptions(this,r)},addHooks:function(){var n=this._marker;n.dragging.enable(),n.on("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging.disable(),n.off("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},_onDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,r){var s=parseInt(n.style.marginTop,10)-r,f=parseInt(n.style.marginLeft,10)-r;n.style.marginTop=s+"px",n.style.marginLeft=f+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs],n._holes&&(this.latlngs=this.latlngs.concat(n._holes)),this._poly=n,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var r=0;r<this._verticesHandlers.length;r++)n(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs],n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,r,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=n,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this._latlngs=r,L.setOptions(this,s)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,r=n._path;n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1)),r&&n.options.editing&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(s){L.DomUtil.removeClass(r,s)}),n.options.editing.className.split(" ").forEach(function(s){L.DomUtil.addClass(r,s)})),n.setStyle(n.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,r=n._path;r&&n.options.editing&&n.options.editing.className&&(n.options.editing.className.split(" ").forEach(function(s){L.DomUtil.removeClass(r,s)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(s){L.DomUtil.addClass(r,s)})),n.setStyle(n.options.original),n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var n,r,s,f,_=this._defaultShape();for(n=0,s=_.length;n<s;n++)f=this._createMarker(_[n],n),f.on("click",this._onMarkerClick,this),f.on("contextmenu",this._onContextMenu,this),this._markers.push(f);var m,g;for(n=0,r=s-1;n<s;r=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[r],g=this._markers[n],this._createMiddleMarker(m,g),this._updatePrevNext(m,g))},_createMarker:function(n,r){var s=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});return s._origLatLng=n,s._index=r,s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(s),s},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),r=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),r},_removeMarker:function(n){var r=n._index;this._markerGroup.removeLayer(n),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var r=n.target,s=this._poly,f=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),s.options.poly){var _=s._map._editTooltip;if(!s.options.poly.allowIntersection&&s.intersects()){L.extend(r._origLatLng,f),r.setLatLng(f);var m=s.options.color;s.setStyle({color:this.options.drawError.color}),_&&_.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){s.setStyle({color:m}),_&&_.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var g=this._poly.getLatLngs();this._poly._convertLatLngs(g,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(n){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,s=n.target;this._defaultShape().length<r||(this._removeMarker(s),this._updatePrevNext(s._prev,s._next),s._middleLeft&&this._markerGroup.removeLayer(s._middleLeft),s._middleRight&&this._markerGroup.removeLayer(s._middleRight),s._prev&&s._next?this._createMiddleMarker(s._prev,s._next):s._prev?s._next||(s._prev._middleRight=null):s._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var r=n.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),s=this._map.layerPointToLatLng(r),f=n.target;L.extend(f._origLatLng,s),f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(n,r){this._markerGroup.eachLayer(function(s){s._index>n&&(s._index+=r)})},_createMiddleMarker:function(n,r){var s,f,_,m=this._getMiddleLatLng(n,r),g=this._createMarker(m);g.setOpacity(.6),n._middleRight=r._middleLeft=g,f=function(){g.off("touchmove",f,this);var y=r._index;g._index=y,g.off("click",s,this).on("click",this._onMarkerClick,this),m.lat=g.getLatLng().lat,m.lng=g.getLatLng().lng,this._spliceLatLngs(y,0,m),this._markers.splice(y,0,g),g.setOpacity(1),this._updateIndexes(y,1),r._index++,this._updatePrevNext(n,g),this._updatePrevNext(g,r),this._poly.fire("editstart")},_=function(){g.off("dragstart",f,this),g.off("dragend",_,this),g.off("touchmove",f,this),this._createMiddleMarker(n,g),this._createMiddleMarker(g,r)},s=function(){f.call(this),_.call(this),this._fireEdit()},g.on("click",s,this).on("dragstart",f,this).on("dragend",_,this).on("touchmove",f,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(n,r){n&&(n._next=r),r&&(r._prev=n)},_getMiddleLatLng:function(n,r){var s=this._poly._map,f=s.project(n.getLatLng()),_=s.project(r.getLatLng());return s.unproject(f._add(_)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=n,L.Util.setOptions(this,r)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var n=this._shape;if(n.setStyle(n.options.original),n._map){this._unbindMarker(this._moveMarker);for(var r=0,s=this._resizeMarkers.length;r<s;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,r){var s=new L.Marker.Touch(n,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(s),this._markerGroup.addLayer(s),s},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){n.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(n){var r=n.target,s=r.getLatLng();r===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){n.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var r=this._getCorners(),s=n.target,f=s._cornerIndex;s.setOpacity(0),this._oppositeCorner=r[(f+2)%4],this._toggleCornerMarkers(0,f)}this._shape.fire("editstart")},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),s=this._map.layerPointToLatLng(r);return n.target===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),!1},_onTouchEnd:function(n){n.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),r=n.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var n=this._getCorners();this._resizeMarkers=[];for(var r=0,s=n.length;r<s;r++)this._resizeMarkers.push(this._createMarker(n[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var r=this._getCorners(),s=n.target,f=s._cornerIndex;this._oppositeCorner=r[(f+2)%4],this._toggleCornerMarkers(0,f)},_onMarkerDragEnd:function(n){var r,s,f=n.target;f===this._moveMarker&&(r=this._shape.getBounds(),s=r.getCenter(),f.setLatLng(s)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var r,s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=this._shape.getBounds(),_=f.getCenter(),m=[],g=0,y=s.length;g<y;g++)r=[s[g].lat-_.lat,s[g].lng-_.lng],m.push([n.lat+r[0],n.lng+r[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var r;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds();return[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest()]},_toggleCornerMarkers:function(n){for(var r=0,s=this._resizeMarkers.length;r<s;r++)this._resizeMarkers[r].setOpacity(n)},_repositionCornerMarkers:function(){for(var n=this._getCorners(),r=0,s=this._resizeMarkers.length;r<s;r++)this._resizeMarkers[r].setLatLng(n[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(n),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),r=this._getResizeMarkerPoint(n);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var r=this._shape._radius*Math.cos(Math.PI/4),s=this._map.project(n);return this._map.unproject([s.x+r,s.y-r])},_resize:function(n){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(n):radius=this._map.distance(r,n),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(n,r){var s={};if(n.touches!==void 0){if(!n.touches.length)return;s=n.touches[0]}else if(n.pointerType!=="touch"||(s=n,!this._filterClick(n)))return;var f=this._map.mouseEventToContainerPoint(s),_=this._map.mouseEventToLayerPoint(s),m=this._map.layerPointToLatLng(_);this._map.fire(r,{latlng:m,layerPoint:_,containerPoint:f,pageX:s.pageX,pageY:s.pageY,originalEvent:n})},_filterClick:function(n){var r=n.timeStamp||n.originalEvent.timeStamp,s=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return s&&s>100&&s<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(n){this._map._loaded&&this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){this._map._loaded&&this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(n,r)}},_onTouchLeave:function(n){this._map._loaded&&this._touchEvent(n,"touchleave")},_onTouchMove:function(n){this._map._loaded&&this._touchEvent(n,"touchmove")},_detectIE:function(){var n=c.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var f=n.indexOf("Edge/");return f>0&&parseInt(n.substring(f+5,n.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var n=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(n,"leaflet-clickable"),L.DomEvent.on(n,"click",this._onMouseClick,this),L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(var s=0;s<r.length;s++)L.DomEvent.on(n,r[s],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var n=c.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var f=n.indexOf("Edge/");return f>0&&parseInt(n.substring(f+5,n.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(n){for(var r=[],s=0,f=n.length;s<f;s++)Array.isArray(n[s])?r.push(L.LatLngUtil.cloneLatLngs(n[s])):r.push(this.cloneLatLng(n[s]));return r},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var s,f,_=r.length,m=0,g=Math.PI/180;if(_>2){for(var y=0;y<_;y++)s=r[y],f=r[(y+1)%_],m+=(f.lng-s.lng)*g*(2+Math.sin(s.lat*g)+Math.sin(f.lat*g));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(r,s){var f=parseFloat(r).toFixed(s),_=L.drawLocal.format&&L.drawLocal.format.numeric,m=_&&_.delimiters,g=m&&m.thousands,y=m&&m.decimal;if(g||y){var E=f.split(".");f=g?E[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g):E[0],y=y||".",E.length>1&&(f=f+y+E[1])}return f},readableArea:function(r,s,g){var _,m,g=L.Util.extend({},n,g);return s?(m=["ha","m"],type=typeof s,type==="string"?m=[s]:type!=="boolean"&&(m=s),_=r>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,g.km)+" km":r>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,g.ha)+" ha":L.GeometryUtil.formattedNumber(r,g.m)+" m"):(r/=.836127,_=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,g.mi)+" mi":r>=4840?L.GeometryUtil.formattedNumber(r/4840,g.ac)+" acres":L.GeometryUtil.formattedNumber(r,g.yd)+" yd"),_},readableDistance:function(r,s,f,_,y){var g,y=L.Util.extend({},n,y);switch(s?typeof s=="string"?s:"metric":f?"feet":_?"nauticalMile":"yards"){case"metric":g=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,y.km)+" km":L.GeometryUtil.formattedNumber(r,y.m)+" m";break;case"feet":r*=3.28083,g=L.GeometryUtil.formattedNumber(r,y.ft)+" ft";break;case"nauticalMile":r*=.53996,g=L.GeometryUtil.formattedNumber(r/1e3,y.nm)+" nm";break;case"yards":default:r*=1.09361,g=r>1760?L.GeometryUtil.formattedNumber(r/1760,y.mi)+" miles":L.GeometryUtil.formattedNumber(r,y.yd)+" yd"}return g},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,r,s,f){return this._checkCounterclockwise(n,s,f)!==this._checkCounterclockwise(r,s,f)&&this._checkCounterclockwise(n,r,s)!==this._checkCounterclockwise(n,r,f)},_checkCounterclockwise:function(n,r,s){return(s.y-n.y)*(r.x-n.x)>(r.y-n.y)*(s.x-n.x)}}),L.Polyline.include({intersects:function(){var n,r,s,f=this._getProjectedPoints(),_=f?f.length:0;if(this._tooFewPointsForIntersection())return!1;for(n=_-1;n>=3;n--)if(r=f[n-1],s=f[n],this._lineSegmentsIntersectsRange(r,s,n-2))return!0;return!1},newLatLngIntersects:function(n,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(n),r)},newPointIntersects:function(n,r){var s=this._getProjectedPoints(),f=s?s.length:0,_=s?s[f-1]:null,m=f-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(_,n,m,r?1:0)},_tooFewPointsForIntersection:function(n){var r=this._getProjectedPoints(),s=r?r.length:0;return s+=n||0,!r||s<=3},_lineSegmentsIntersectsRange:function(n,r,s,f){var _,m,g=this._getProjectedPoints();f=f||0;for(var y=s;y>f;y--)if(_=g[y-1],m=g[y],L.LineUtil.segmentsIntersect(n,r,_,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var n=[],r=this._defaultShape(),s=0;s<r.length;s++)n.push(this._map.latLngToLayerPoint(r[s]));return n}}),L.Polygon.include({intersects:function(){var n,r,s,f,_=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(n=_.length,r=_[0],s=_[n-1],f=n-2,this._lineSegmentsIntersectsRange(s,r,f,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(n){var r,s=L.DomUtil.create("div","leaflet-draw"),f=!1;for(var _ in this._toolbars)this._toolbars.hasOwnProperty(_)&&(r=this._toolbars[_].addToolbar(n))&&(f||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),f=!0),s.appendChild(r));return s},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(n)},_toolbarEnabled:function(n){var r=n.target;for(var s in this._toolbars)this._toolbars[s]!==r&&this._toolbars[s].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var r,s=L.DomUtil.create("div","leaflet-draw-section"),f=0,_=this._toolbarClass||"",m=this.getModeHandlers(n);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,r=0;r<m.length;r++)m[r].enabled&&this._initModeHandler(m[r].handler,this._toolbarContainer,f++,_,m[r].title);if(f)return this._lastButtonIndex=--f,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),s.appendChild(this._toolbarContainer),s.appendChild(this._actionsContainer),s},removeToolbar:function(){for(var n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,s=this._actionButtons.length;r<s;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(n,r,s,f,_){var m=n.type;this._modes[m]={},this._modes[m].handler=n,this._modes[m].button=this._createButton({type:m,title:_,className:f+"-"+m,container:r,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=s,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!c.MSStream},_createButton:function(n){var r=L.DomUtil.create("a",n.className||"",n.container),s=L.DomUtil.create("span","sr-only",n.container);r.href="#",r.appendChild(s),n.title&&(r.title=n.title,s.innerHTML=n.title),n.text&&(r.innerHTML=n.text,s.innerHTML=n.text);var f=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,f,n.callback,n.context),r},_disposeButton:function(n,r){var s=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,s,r)},_handlerActivated:function(n){this.disable(),this._activeMode=this._modes[n.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(n){var r,s,f,_,m=this._actionsContainer,g=this.getActions(n),y=g.length;for(s=0,f=this._actionButtons.length;s<f;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var E=0;E<y;E++)"enabled"in g[E]&&!g[E].enabled||(r=L.DomUtil.create("li","",m),_=this._createButton({title:g[E].title,text:g[E].text,container:r,callback:g[E].callback,context:g[E].context}),this._actionButtons.push({button:_,callback:g[E].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,r=this._lastButtonIndex,s=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=s+"px",n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),n===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n,this._popupPane=n._panes.popupPane,this._visible=!1,this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"</span><br />":"")+"<span>"+n.text+"</span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var r=this._map.latLngToLayerPoint(n),s=this._container;return this._container&&(this._visible&&(s.style.visibility="inherit"),L.DomUtil.setPosition(s,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var r in this.options)this.options.hasOwnProperty(r)&&n[r]&&(n[r]=L.extend({},this.options[r],n[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var r in this._modes)this._modes.hasOwnProperty(r)&&n.hasOwnProperty(r)&&this._modes[r].handler.setOptions(n[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(n.edit.selectedPathOptions===void 0&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions)),n.remove&&(n.remove=L.extend({},this.options.remove,n.remove)),n.poly&&(n.poly=L.extend({},this.options.poly,n.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,n),this._selectedFeatureCount=0},getModeHandlers:function(n){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(n){var r=L.Toolbar.prototype.addToolbar.call(this,n);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var n,r=this.options.featureGroup,s=r.getLayers().length!==0;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,s?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,s?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),n._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(n.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var r=L.Util.stamp(n);this._uneditedLayerProps[r]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var r=L.Util.stamp(n);n.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[r].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[r].latlng),n.setRadius(this._uneditedLayerProps[r].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[r].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var r,s,f=n.layer||n.target||n;this._backupLayer(f),this.options.poly&&(s=L.Util.extend({},this.options.poly),f.options.poly=s),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=f.options.color,r.fillColor=f.options.fillColor),f.options.original=L.extend({},f.options),f.options.editing=r),f instanceof L.Marker?(f.editing&&f.editing.enable(),f.dragging.enable(),f.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.enable()},_disableLayerEdit:function(n){var r=n.layer||n.target||n;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(n){var r=n.originalEvent.changedTouches[0],s=this._map.mouseEventToLayerPoint(r),f=this._map.layerPointToLatLng(s);n.target.setLatLng(f)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n),n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this),this.save()},_enableLayerDelete:function(n){(n.layer||n.target||n).on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var r=n.layer||n.target||n;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(n){var r=n.layer||n.target||n;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);class Hn{constructor(l){if(this.constructor===Hn)throw new Error("Cannot instantiate interface directly.")}initMap(l,h){throw new Error("initMap() must be implemented")}destroyMap(){throw new Error("destroyMap() must be implemented")}}class da extends Hn{addGeoJSONFeature(l){if(!this.map||!this.drawnItems)return;l._dbId&&(!l.properties||!l.properties._dbId)&&(l.properties||(l.properties={}),l.properties._dbId=l._dbId);const h=wt.GeoJSON.geometryToLayer(l);if(h.feature=h.feature||{},h.feature.type=l.type,h.feature.properties=l.properties,h.feature.geometry=l.geometry,this.drawnItems.addLayer(h),h.on("click",d=>{wt.DomEvent.stopPropagation(d),this.emit("featureClick",{feature:h.feature,layer:h,event:d}),h._popup&&h.openPopup(d.latlng)}),l.geometry.type==="Polygon"){const d=h.getLatLngs()[0],n=wt.GeometryUtil.geodesicArea(d);d.map(f=>`[${f.lat.toFixed(6)}, ${f.lng.toFixed(6)}]`).join("<br>");const r=l.properties||{};let s=l.name||`Shape #${r.id||r._dbId}`||"Unnamed Shape";console.log("Popup - Feature properties:",r),s==="Unnamed Shape"&&!r._dbId&&(l.properties||(l.properties={}),l.properties.description="New Shape",s="New Shape"),h.bindPopup(`<b>Name:</b> ${s}<br><b>Area:</b> ${this.formatArea(n)}<br>`)}else if(l.geometry.type==="LineString"){const d=h.getLatLngs();let n=0;for(let r=1;r<d.length;r++)n+=d[r-1].distanceTo(d[r]);h.bindPopup("Distance: "+this.formatDistance(n))}}getAllDrawnGeoJSON(){return this.drawnItems?this.drawnItems.toGeoJSON():null}constructor(l){super(l),this.containerId=l,this.map=null,this.drawnItems=null,this.drawControl=null,this.eventHandlers={}}initMap(l=[14.5995,120.9842],h=13){const d=wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),n=wt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19});this.map=wt.map(this.containerId,{layers:[n],center:l,zoom:h});const r={Satellite:n,"Street Map":d};wt.control.layers(r,{}).addTo(this.map),this.drawnItems=new wt.FeatureGroup,this.map.addLayer(this.drawnItems),this.drawControl=new wt.Control.Draw({edit:{featureGroup:this.drawnItems},draw:{polygon:!0,polyline:!0,rectangle:!1,circle:!1,marker:!1,circlemarker:!1}}),this.map.addControl(this.drawControl),this.map.on(wt.Draw.Event.CREATED,s=>{const f=s.layer;if(this.drawnItems.addLayer(f),s.layerType==="polygon"){const _=wt.GeometryUtil.geodesicArea(f.getLatLngs()[0]);f.bindPopup("Area: "+this.formatArea(_)).openPopup()}else if(s.layerType==="polyline"){const _=this.getPolylineDistance(f);f.bindPopup("Distance: "+this.formatDistance(_)).openPopup()}f.on("click",_=>{wt.DomEvent.stopPropagation(_),this.emit("featureClick",{feature:f.feature,layer:f,event:_})})}),this.map.on(wt.Draw.Event.EDITED,s=>{s.layers.eachLayer(f=>{f.feature&&f.feature.properties&&f.feature.properties._dbId&&(f.feature._dbId=f.feature.properties._dbId,f.feature._fromDb=!0,f.feature._modified=!0)})}),this.map.on(wt.Draw.Event.DELETED,s=>{s.layers.eachLayer(f=>{this.onFeatureDeleted&&f.feature&&this.onFeatureDeleted(f.feature)})})}destroyMap(){this.map&&(this.map.remove(),this.map=null,this.drawnItems=null,this.drawControl=null)}getMapState(){return this.map?{center:this.map.getCenter(),zoom:this.map.getZoom()}:null}setMapState(l){!this.map||!l||l.center&&this.map.setView(l.center,l.zoom||this.map.getZoom())}getPolylineDistance(l){const h=l.getLatLngs();let d=0;for(let n=1;n<h.length;n++)d+=h[n-1].distanceTo(h[n]);return d}formatArea(l){return l>=1e6?(l/1e6).toFixed(2)+" km":l.toFixed(2)+" m"}formatDistance(l){return l>=1e3?(l/1e3).toFixed(2)+" km":l.toFixed(2)+" m"}on(l,h){return this.eventHandlers[l]||(this.eventHandlers[l]=[]),this.eventHandlers[l].push(h),this}off(l,h){return this.eventHandlers[l]?(h?this.eventHandlers[l]=this.eventHandlers[l].filter(d=>d!==h):delete this.eventHandlers[l],this):this}emit(l,h){if(this.eventHandlers[l])return this.eventHandlers[l].forEach(d=>{d(h)}),this}}var hn={},Ci={exports:{}},un,Wo;function kr(){return Wo||(Wo=1,un=function(l,h){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return l.apply(h,n)}}),un}var cn,Yo;function jt(){if(Yo)return cn;Yo=1;var c=kr(),l=Object.prototype.toString;function h(p){return l.call(p)==="[object Array]"}function d(p){return typeof p>"u"}function n(p){return p!==null&&!d(p)&&p.constructor!==null&&!d(p.constructor)&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p)}function r(p){return l.call(p)==="[object ArrayBuffer]"}function s(p){return typeof FormData<"u"&&p instanceof FormData}function f(p){var w;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?w=ArrayBuffer.isView(p):w=p&&p.buffer&&p.buffer instanceof ArrayBuffer,w}function _(p){return typeof p=="string"}function m(p){return typeof p=="number"}function g(p){return p!==null&&typeof p=="object"}function y(p){if(l.call(p)!=="[object Object]")return!1;var w=Object.getPrototypeOf(p);return w===null||w===Object.prototype}function E(p){return l.call(p)==="[object Date]"}function S(p){return l.call(p)==="[object File]"}function O(p){return l.call(p)==="[object Blob]"}function A(p){return l.call(p)==="[object Function]"}function z(p){return g(p)&&A(p.pipe)}function N(p){return typeof URLSearchParams<"u"&&p instanceof URLSearchParams}function Z(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function U(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function et(p,w){if(!(p===null||typeof p>"u"))if(typeof p!="object"&&(p=[p]),h(p))for(var P=0,D=p.length;P<D;P++)w.call(null,p[P],P,p);else for(var B in p)Object.prototype.hasOwnProperty.call(p,B)&&w.call(null,p[B],B,p)}function rt(){var p={};function w(B,W){y(p[W])&&y(B)?p[W]=rt(p[W],B):y(B)?p[W]=rt({},B):h(B)?p[W]=B.slice():p[W]=B}for(var P=0,D=arguments.length;P<D;P++)et(arguments[P],w);return p}function C(p,w,P){return et(w,function(B,W){P&&typeof B=="function"?p[W]=c(B,P):p[W]=B}),p}function M(p){return p.charCodeAt(0)===65279&&(p=p.slice(1)),p}return cn={isArray:h,isArrayBuffer:r,isBuffer:n,isFormData:s,isArrayBufferView:f,isString:_,isNumber:m,isObject:g,isPlainObject:y,isUndefined:d,isDate:E,isFile:S,isBlob:O,isFunction:A,isStream:z,isURLSearchParams:N,isStandardBrowserEnv:U,forEach:et,merge:rt,extend:C,trim:Z,stripBOM:M},cn}var dn,Ko;function Sr(){if(Ko)return dn;Ko=1;var c=jt();function l(h){return encodeURIComponent(h).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return dn=function(d,n,r){if(!n)return d;var s;if(r)s=r(n);else if(c.isURLSearchParams(n))s=n.toString();else{var f=[];c.forEach(n,function(g,y){g===null||typeof g>"u"||(c.isArray(g)?y=y+"[]":g=[g],c.forEach(g,function(S){c.isDate(S)?S=S.toISOString():c.isObject(S)&&(S=JSON.stringify(S)),f.push(l(y)+"="+l(S))}))}),s=f.join("&")}if(s){var _=d.indexOf("#");_!==-1&&(d=d.slice(0,_)),d+=(d.indexOf("?")===-1?"?":"&")+s}return d},dn}var fn,Xo;function fa(){if(Xo)return fn;Xo=1;var c=jt();function l(){this.handlers=[]}return l.prototype.use=function(d,n,r){return this.handlers.push({fulfilled:d,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1},l.prototype.eject=function(d){this.handlers[d]&&(this.handlers[d]=null)},l.prototype.forEach=function(d){c.forEach(this.handlers,function(r){r!==null&&d(r)})},fn=l,fn}var pn,$o;function pa(){if($o)return pn;$o=1;var c=jt();return pn=function(h,d){c.forEach(h,function(r,s){s!==d&&s.toUpperCase()===d.toUpperCase()&&(h[d]=r,delete h[s])})},pn}var mn,Jo;function Cr(){return Jo||(Jo=1,mn=function(l,h,d,n,r){return l.config=h,d&&(l.code=d),l.request=n,l.response=r,l.isAxiosError=!0,l.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},l}),mn}var _n,Qo;function Dr(){if(Qo)return _n;Qo=1;var c=Cr();return _n=function(h,d,n,r,s){var f=new Error(h);return c(f,d,n,r,s)},_n}var vn,tr;function ma(){if(tr)return vn;tr=1;var c=Dr();return vn=function(h,d,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?h(n):d(c("Request failed with status code "+n.status,n.config,null,n.request,n))},vn}var gn,er;function _a(){if(er)return gn;er=1;var c=jt();return gn=c.isStandardBrowserEnv()?function(){return{write:function(d,n,r,s,f,_){var m=[];m.push(d+"="+encodeURIComponent(n)),c.isNumber(r)&&m.push("expires="+new Date(r).toGMTString()),c.isString(s)&&m.push("path="+s),c.isString(f)&&m.push("domain="+f),_===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(d){var n=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),gn}var yn,ir;function va(){return ir||(ir=1,yn=function(l){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(l)}),yn}var Ln,nr;function ga(){return nr||(nr=1,Ln=function(l,h){return h?l.replace(/\/+$/,"")+"/"+h.replace(/^\/+/,""):l}),Ln}var wn,or;function ya(){if(or)return wn;or=1;var c=va(),l=ga();return wn=function(d,n){return d&&!c(n)?l(d,n):n},wn}var bn,rr;function La(){if(rr)return bn;rr=1;var c=jt(),l=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return bn=function(d){var n={},r,s,f;return d&&c.forEach(d.split(`
`),function(m){if(f=m.indexOf(":"),r=c.trim(m.substr(0,f)).toLowerCase(),s=c.trim(m.substr(f+1)),r){if(n[r]&&l.indexOf(r)>=0)return;r==="set-cookie"?n[r]=(n[r]?n[r]:[]).concat([s]):n[r]=n[r]?n[r]+", "+s:s}}),n},bn}var xn,sr;function wa(){if(sr)return xn;sr=1;var c=jt();return xn=c.isStandardBrowserEnv()?function(){var h=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),n;function r(s){var f=s;return h&&(d.setAttribute("href",f),f=d.href),d.setAttribute("href",f),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return n=r(window.location.href),function(f){var _=c.isString(f)?r(f):f;return _.protocol===n.protocol&&_.host===n.host}}():function(){return function(){return!0}}(),xn}var Pn,ar;function lr(){if(ar)return Pn;ar=1;var c=jt(),l=ma(),h=_a(),d=Sr(),n=ya(),r=La(),s=wa(),f=Dr();return Pn=function(m){return new Promise(function(y,E){var S=m.data,O=m.headers,A=m.responseType;c.isFormData(S)&&delete O["Content-Type"];var z=new XMLHttpRequest;if(m.auth){var N=m.auth.username||"",Z=m.auth.password?unescape(encodeURIComponent(m.auth.password)):"";O.Authorization="Basic "+btoa(N+":"+Z)}var U=n(m.baseURL,m.url);z.open(m.method.toUpperCase(),d(U,m.params,m.paramsSerializer),!0),z.timeout=m.timeout;function et(){if(z){var C="getAllResponseHeaders"in z?r(z.getAllResponseHeaders()):null,M=!A||A==="text"||A==="json"?z.responseText:z.response,p={data:M,status:z.status,statusText:z.statusText,headers:C,config:m,request:z};l(y,E,p),z=null}}if("onloadend"in z?z.onloadend=et:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(et)},z.onabort=function(){z&&(E(f("Request aborted",m,"ECONNABORTED",z)),z=null)},z.onerror=function(){E(f("Network Error",m,null,z)),z=null},z.ontimeout=function(){var M="timeout of "+m.timeout+"ms exceeded";m.timeoutErrorMessage&&(M=m.timeoutErrorMessage),E(f(M,m,m.transitional&&m.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",z)),z=null},c.isStandardBrowserEnv()){var rt=(m.withCredentials||s(U))&&m.xsrfCookieName?h.read(m.xsrfCookieName):void 0;rt&&(O[m.xsrfHeaderName]=rt)}"setRequestHeader"in z&&c.forEach(O,function(M,p){typeof S>"u"&&p.toLowerCase()==="content-type"?delete O[p]:z.setRequestHeader(p,M)}),c.isUndefined(m.withCredentials)||(z.withCredentials=!!m.withCredentials),A&&A!=="json"&&(z.responseType=m.responseType),typeof m.onDownloadProgress=="function"&&z.addEventListener("progress",m.onDownloadProgress),typeof m.onUploadProgress=="function"&&z.upload&&z.upload.addEventListener("progress",m.onUploadProgress),m.cancelToken&&m.cancelToken.promise.then(function(M){z&&(z.abort(),E(M),z=null)}),S||(S=null),z.send(S)})},Pn}var Tn,hr;function Gn(){if(hr)return Tn;hr=1;var c=jt(),l=pa(),h=Cr(),d={"Content-Type":"application/x-www-form-urlencoded"};function n(_,m){!c.isUndefined(_)&&c.isUndefined(_["Content-Type"])&&(_["Content-Type"]=m)}function r(){var _;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(_=lr()),_}function s(_,m,g){if(c.isString(_))try{return(m||JSON.parse)(_),c.trim(_)}catch(y){if(y.name!=="SyntaxError")throw y}return(g||JSON.stringify)(_)}var f={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:r(),transformRequest:[function(m,g){return l(g,"Accept"),l(g,"Content-Type"),c.isFormData(m)||c.isArrayBuffer(m)||c.isBuffer(m)||c.isStream(m)||c.isFile(m)||c.isBlob(m)?m:c.isArrayBufferView(m)?m.buffer:c.isURLSearchParams(m)?(n(g,"application/x-www-form-urlencoded;charset=utf-8"),m.toString()):c.isObject(m)||g&&g["Content-Type"]==="application/json"?(n(g,"application/json"),s(m)):m}],transformResponse:[function(m){var g=this.transitional,y=g&&g.silentJSONParsing,E=g&&g.forcedJSONParsing,S=!y&&this.responseType==="json";if(S||E&&c.isString(m)&&m.length)try{return JSON.parse(m)}catch(O){if(S)throw O.name==="SyntaxError"?h(O,this,"E_JSON_PARSE"):O}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(m){return m>=200&&m<300}};return f.headers={common:{Accept:"application/json, text/plain, */*"}},c.forEach(["delete","get","head"],function(m){f.headers[m]={}}),c.forEach(["post","put","patch"],function(m){f.headers[m]=c.merge(d)}),Tn=f,Tn}var En,ur;function ba(){if(ur)return En;ur=1;var c=jt(),l=Gn();return En=function(d,n,r){var s=this||l;return c.forEach(r,function(_){d=_.call(s,d,n)}),d},En}var Mn,cr;function Or(){return cr||(cr=1,Mn=function(l){return!!(l&&l.__CANCEL__)}),Mn}var kn,dr;function xa(){if(dr)return kn;dr=1;var c=jt(),l=ba(),h=Or(),d=Gn();function n(r){r.cancelToken&&r.cancelToken.throwIfRequested()}return kn=function(s){n(s),s.headers=s.headers||{},s.data=l.call(s,s.data,s.headers,s.transformRequest),s.headers=c.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),c.forEach(["delete","get","head","post","put","patch","common"],function(m){delete s.headers[m]});var f=s.adapter||d.adapter;return f(s).then(function(m){return n(s),m.data=l.call(s,m.data,m.headers,s.transformResponse),m},function(m){return h(m)||(n(s),m&&m.response&&(m.response.data=l.call(s,m.response.data,m.response.headers,s.transformResponse))),Promise.reject(m)})},kn}var Sn,fr;function Ir(){if(fr)return Sn;fr=1;var c=jt();return Sn=function(h,d){d=d||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],f=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],_=["validateStatus"];function m(S,O){return c.isPlainObject(S)&&c.isPlainObject(O)?c.merge(S,O):c.isPlainObject(O)?c.merge({},O):c.isArray(O)?O.slice():O}function g(S){c.isUndefined(d[S])?c.isUndefined(h[S])||(n[S]=m(void 0,h[S])):n[S]=m(h[S],d[S])}c.forEach(r,function(O){c.isUndefined(d[O])||(n[O]=m(void 0,d[O]))}),c.forEach(s,g),c.forEach(f,function(O){c.isUndefined(d[O])?c.isUndefined(h[O])||(n[O]=m(void 0,h[O])):n[O]=m(void 0,d[O])}),c.forEach(_,function(O){O in d?n[O]=m(h[O],d[O]):O in h&&(n[O]=m(void 0,h[O]))});var y=r.concat(s).concat(f).concat(_),E=Object.keys(h).concat(Object.keys(d)).filter(function(O){return y.indexOf(O)===-1});return c.forEach(E,g),n},Sn}const Pa="0.21.4",Ta={version:Pa};var Cn,pr;function Ea(){if(pr)return Cn;pr=1;var c=Ta,l={};["object","boolean","number","function","string","symbol"].forEach(function(s,f){l[s]=function(m){return typeof m===s||"a"+(f<1?"n ":" ")+s}});var h={},d=c.version.split(".");function n(s,f){for(var _=f?f.split("."):d,m=s.split("."),g=0;g<3;g++){if(_[g]>m[g])return!0;if(_[g]<m[g])return!1}return!1}l.transitional=function(f,_,m){var g=_&&n(_);function y(E,S){return"[Axios v"+c.version+"] Transitional option '"+E+"'"+S+(m?". "+m:"")}return function(E,S,O){if(f===!1)throw new Error(y(S," has been removed in "+_));return g&&!h[S]&&(h[S]=!0,console.warn(y(S," has been deprecated since v"+_+" and will be removed in the near future"))),f?f(E,S,O):!0}};function r(s,f,_){if(typeof s!="object")throw new TypeError("options must be an object");for(var m=Object.keys(s),g=m.length;g-- >0;){var y=m[g],E=f[y];if(E){var S=s[y],O=S===void 0||E(S,y,s);if(O!==!0)throw new TypeError("option "+y+" must be "+O);continue}if(_!==!0)throw Error("Unknown option "+y)}}return Cn={isOlderVersion:n,assertOptions:r,validators:l},Cn}var Dn,mr;function Ma(){if(mr)return Dn;mr=1;var c=jt(),l=Sr(),h=fa(),d=xa(),n=Ir(),r=Ea(),s=r.validators;function f(_){this.defaults=_,this.interceptors={request:new h,response:new h}}return f.prototype.request=function(m){typeof m=="string"?(m=arguments[1]||{},m.url=arguments[0]):m=m||{},m=n(this.defaults,m),m.method?m.method=m.method.toLowerCase():this.defaults.method?m.method=this.defaults.method.toLowerCase():m.method="get";var g=m.transitional;g!==void 0&&r.assertOptions(g,{silentJSONParsing:s.transitional(s.boolean,"1.0.0"),forcedJSONParsing:s.transitional(s.boolean,"1.0.0"),clarifyTimeoutError:s.transitional(s.boolean,"1.0.0")},!1);var y=[],E=!0;this.interceptors.request.forEach(function(et){typeof et.runWhen=="function"&&et.runWhen(m)===!1||(E=E&&et.synchronous,y.unshift(et.fulfilled,et.rejected))});var S=[];this.interceptors.response.forEach(function(et){S.push(et.fulfilled,et.rejected)});var O;if(!E){var A=[d,void 0];for(Array.prototype.unshift.apply(A,y),A=A.concat(S),O=Promise.resolve(m);A.length;)O=O.then(A.shift(),A.shift());return O}for(var z=m;y.length;){var N=y.shift(),Z=y.shift();try{z=N(z)}catch(U){Z(U);break}}try{O=d(z)}catch(U){return Promise.reject(U)}for(;S.length;)O=O.then(S.shift(),S.shift());return O},f.prototype.getUri=function(m){return m=n(this.defaults,m),l(m.url,m.params,m.paramsSerializer).replace(/^\?/,"")},c.forEach(["delete","get","head","options"],function(m){f.prototype[m]=function(g,y){return this.request(n(y||{},{method:m,url:g,data:(y||{}).data}))}}),c.forEach(["post","put","patch"],function(m){f.prototype[m]=function(g,y,E){return this.request(n(E||{},{method:m,url:g,data:y}))}}),Dn=f,Dn}var On,_r;function Ar(){if(_r)return On;_r=1;function c(l){this.message=l}return c.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},c.prototype.__CANCEL__=!0,On=c,On}var In,vr;function ka(){if(vr)return In;vr=1;var c=Ar();function l(h){if(typeof h!="function")throw new TypeError("executor must be a function.");var d;this.promise=new Promise(function(s){d=s});var n=this;h(function(s){n.reason||(n.reason=new c(s),d(n.reason))})}return l.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},l.source=function(){var d,n=new l(function(s){d=s});return{token:n,cancel:d}},In=l,In}var An,gr;function Sa(){return gr||(gr=1,An=function(l){return function(d){return l.apply(null,d)}}),An}var zn,yr;function Ca(){return yr||(yr=1,zn=function(l){return typeof l=="object"&&l.isAxiosError===!0}),zn}var Lr;function Da(){if(Lr)return Ci.exports;Lr=1;var c=jt(),l=kr(),h=Ma(),d=Ir(),n=Gn();function r(f){var _=new h(f),m=l(h.prototype.request,_);return c.extend(m,h.prototype,_),c.extend(m,_),m}var s=r(n);return s.Axios=h,s.create=function(_){return r(d(s.defaults,_))},s.Cancel=Ar(),s.CancelToken=ka(),s.isCancel=Or(),s.all=function(_){return Promise.all(_)},s.spread=Sa(),s.isAxiosError=Ca(),Ci.exports=s,Ci.exports.default=s,Ci.exports}var Bn,wr;function Oa(){return wr||(wr=1,Bn=Da()),Bn}var Rn,br;function Ia(){if(br)return Rn;br=1;var c=function(Z){return l(Z)&&!h(Z)};function l(N){return!!N&&typeof N=="object"}function h(N){var Z=Object.prototype.toString.call(N);return Z==="[object RegExp]"||Z==="[object Date]"||r(N)}var d=typeof Symbol=="function"&&Symbol.for,n=d?Symbol.for("react.element"):60103;function r(N){return N.$$typeof===n}function s(N){return Array.isArray(N)?[]:{}}function f(N,Z){return Z.clone!==!1&&Z.isMergeableObject(N)?A(s(N),N,Z):N}function _(N,Z,U){return N.concat(Z).map(function(et){return f(et,U)})}function m(N,Z){if(!Z.customMerge)return A;var U=Z.customMerge(N);return typeof U=="function"?U:A}function g(N){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(N).filter(function(Z){return Object.propertyIsEnumerable.call(N,Z)}):[]}function y(N){return Object.keys(N).concat(g(N))}function E(N,Z){try{return Z in N}catch{return!1}}function S(N,Z){return E(N,Z)&&!(Object.hasOwnProperty.call(N,Z)&&Object.propertyIsEnumerable.call(N,Z))}function O(N,Z,U){var et={};return U.isMergeableObject(N)&&y(N).forEach(function(rt){et[rt]=f(N[rt],U)}),y(Z).forEach(function(rt){S(N,rt)||(E(N,rt)&&U.isMergeableObject(Z[rt])?et[rt]=m(rt,U)(N[rt],Z[rt],U):et[rt]=f(Z[rt],U))}),et}function A(N,Z,U){U=U||{},U.arrayMerge=U.arrayMerge||_,U.isMergeableObject=U.isMergeableObject||c,U.cloneUnlessOtherwiseSpecified=f;var et=Array.isArray(Z),rt=Array.isArray(N),C=et===rt;return C?et?U.arrayMerge(N,Z,U):O(N,Z,U):f(Z,U)}A.all=function(Z,U){if(!Array.isArray(Z))throw new Error("first argument should be an array");return Z.reduce(function(et,rt){return A(et,rt,U)},{})};var z=A;return Rn=z,Rn}var xr;function Aa(){return xr||(xr=1,function(c){function l(C){return C&&typeof C=="object"&&"default"in C?C.default:C}var h=l(Oa()),d=ia(),n=l(Ia());function r(){return(r=Object.assign?Object.assign.bind():function(C){for(var M=1;M<arguments.length;M++){var p=arguments[M];for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(C[w]=p[w])}return C}).apply(this,arguments)}var s,f={modal:null,listener:null,show:function(C){var M=this;typeof C=="object"&&(C="All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>"+JSON.stringify(C));var p=document.createElement("html");p.innerHTML=C,p.querySelectorAll("a").forEach(function(P){return P.setAttribute("target","_top")}),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",function(){return M.hide()});var w=document.createElement("iframe");if(w.style.backgroundColor="white",w.style.borderRadius="5px",w.style.width="100%",w.style.height="100%",this.modal.appendChild(w),document.body.prepend(this.modal),document.body.style.overflow="hidden",!w.contentWindow)throw new Error("iframe not yet ready.");w.contentWindow.document.open(),w.contentWindow.document.write(p.outerHTML),w.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide:function(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape:function(C){C.keyCode===27&&this.hide()}};function _(C,M){var p;return function(){var w=arguments,P=this;clearTimeout(p),p=setTimeout(function(){return C.apply(P,[].slice.call(w))},M)}}function m(C,M,p){for(var w in M===void 0&&(M=new FormData),p===void 0&&(p=null),C=C||{})Object.prototype.hasOwnProperty.call(C,w)&&y(M,g(p,w),C[w]);return M}function g(C,M){return C?C+"["+M+"]":M}function y(C,M,p){return Array.isArray(p)?Array.from(p.keys()).forEach(function(w){return y(C,g(M,w.toString()),p[w])}):p instanceof Date?C.append(M,p.toISOString()):p instanceof File?C.append(M,p,p.name):p instanceof Blob?C.append(M,p):typeof p=="boolean"?C.append(M,p?"1":"0"):typeof p=="string"?C.append(M,p):typeof p=="number"?C.append(M,""+p):p==null?C.append(M,""):void m(p,C,M)}function E(C){return new URL(C.toString(),window.location.toString())}function S(C,M,p,w){w===void 0&&(w="brackets");var P=/^https?:\/\//.test(M.toString()),D=P||M.toString().startsWith("/"),B=!D&&!M.toString().startsWith("#")&&!M.toString().startsWith("?"),W=M.toString().includes("?")||C===c.Method.GET&&Object.keys(p).length,q=M.toString().includes("#"),j=new URL(M.toString(),"http://localhost");return C===c.Method.GET&&Object.keys(p).length&&(j.search=d.stringify(n(d.parse(j.search,{ignoreQueryPrefix:!0}),p),{encodeValuesOnly:!0,arrayFormat:w}),p={}),[[P?j.protocol+"//"+j.host:"",D?j.pathname:"",B?j.pathname.substring(1):"",W?j.search:"",q?j.hash:""].join(""),p]}function O(C){return(C=new URL(C.href)).hash="",C}function A(C,M){return document.dispatchEvent(new CustomEvent("inertia:"+C,M))}(s=c.Method||(c.Method={})).GET="get",s.POST="post",s.PUT="put",s.PATCH="patch",s.DELETE="delete";var z=function(C){return A("finish",{detail:{visit:C}})},N=function(C){return A("navigate",{detail:{page:C}})},Z=typeof window>"u",U=function(){function C(){this.visitId=null}var M=C.prototype;return M.init=function(p){var w=p.resolveComponent,P=p.swapComponent;this.page=p.initialPage,this.resolveComponent=w,this.swapComponent=P,this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.isLocationVisit()?this.handleLocationVisit(this.page):this.handleInitialPageVisit(this.page),this.setupEventListeners()},M.handleInitialPageVisit=function(p){this.page.url+=window.location.hash,this.setPage(p,{preserveState:!0}).then(function(){return N(p)})},M.setupEventListeners=function(){window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",_(this.handleScrollEvent.bind(this),100),!0)},M.scrollRegions=function(){return document.querySelectorAll("[scroll-region]")},M.handleScrollEvent=function(p){typeof p.target.hasAttribute=="function"&&p.target.hasAttribute("scroll-region")&&this.saveScrollPositions()},M.saveScrollPositions=function(){this.replaceState(r({},this.page,{scrollRegions:Array.from(this.scrollRegions()).map(function(p){return{top:p.scrollTop,left:p.scrollLeft}})}))},M.resetScrollPositions=function(){var p;window.scrollTo(0,0),this.scrollRegions().forEach(function(w){typeof w.scrollTo=="function"?w.scrollTo(0,0):(w.scrollTop=0,w.scrollLeft=0)}),this.saveScrollPositions(),window.location.hash&&((p=document.getElementById(window.location.hash.slice(1)))==null||p.scrollIntoView())},M.restoreScrollPositions=function(){var p=this;this.page.scrollRegions&&this.scrollRegions().forEach(function(w,P){var D=p.page.scrollRegions[P];D&&(typeof w.scrollTo=="function"?w.scrollTo(D.left,D.top):(w.scrollTop=D.top,w.scrollLeft=D.left))})},M.isBackForwardVisit=function(){return window.history.state&&window.performance&&window.performance.getEntriesByType("navigation").length>0&&window.performance.getEntriesByType("navigation")[0].type==="back_forward"},M.handleBackForwardVisit=function(p){var w=this;window.history.state.version=p.version,this.setPage(window.history.state,{preserveScroll:!0,preserveState:!0}).then(function(){w.restoreScrollPositions(),N(p)})},M.locationVisit=function(p,w){try{window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify({preserveScroll:w})),window.location.href=p.href,O(window.location).href===O(p).href&&window.location.reload()}catch{return!1}},M.isLocationVisit=function(){try{return window.sessionStorage.getItem("inertiaLocationVisit")!==null}catch{return!1}},M.handleLocationVisit=function(p){var w,P,D,B,W=this,q=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit")||"");window.sessionStorage.removeItem("inertiaLocationVisit"),p.url+=window.location.hash,p.rememberedState=(w=(P=window.history.state)==null?void 0:P.rememberedState)!=null?w:{},p.scrollRegions=(D=(B=window.history.state)==null?void 0:B.scrollRegions)!=null?D:[],this.setPage(p,{preserveScroll:q.preserveScroll,preserveState:!0}).then(function(){q.preserveScroll&&W.restoreScrollPositions(),N(p)})},M.isLocationVisitResponse=function(p){return p&&p.status===409&&p.headers["x-inertia-location"]},M.isInertiaResponse=function(p){return p==null?void 0:p.headers["x-inertia"]},M.createVisitId=function(){return this.visitId={},this.visitId},M.cancelVisit=function(p,w){var P=w.cancelled,D=P!==void 0&&P,B=w.interrupted,W=B!==void 0&&B;!p||p.completed||p.cancelled||p.interrupted||(p.cancelToken.cancel(),p.onCancel(),p.completed=!1,p.cancelled=D,p.interrupted=W,z(p),p.onFinish(p))},M.finishVisit=function(p){p.cancelled||p.interrupted||(p.completed=!0,p.cancelled=!1,p.interrupted=!1,z(p),p.onFinish(p))},M.resolvePreserveOption=function(p,w){return typeof p=="function"?p(w):p==="errors"?Object.keys(w.props.errors||{}).length>0:p},M.visit=function(p,w){var P=this,D=w===void 0?{}:w,B=D.method,W=B===void 0?c.Method.GET:B,q=D.data,j=q===void 0?{}:q,at=D.replace,Mt=at!==void 0&&at,G=D.preserveScroll,At=G!==void 0&&G,F=D.preserveState,Q=F!==void 0&&F,yt=D.only,vt=yt===void 0?[]:yt,ct=D.headers,ot=ct===void 0?{}:ct,J=D.errorBag,T=J===void 0?"":J,it=D.forceFormData,dt=it!==void 0&&it,ft=D.onCancelToken,pt=ft===void 0?function(){}:ft,lt=D.onBefore,zt=lt===void 0?function(){}:lt,Gt=D.onStart,Nt=Gt===void 0?function(){}:Gt,Zt=D.onProgress,Bt=Zt===void 0?function(){}:Zt,bt=D.onFinish,xe=bt===void 0?function(){}:bt,_e=D.onCancel,ve=_e===void 0?function(){}:_e,ge=D.onSuccess,ye=ge===void 0?function(){}:ge,Pe=D.onError,Te=Pe===void 0?function(){}:Pe,se=D.queryStringArrayFormat,ae=se===void 0?"brackets":se,Wt=typeof p=="string"?E(p):p;if(!function X(ut){return ut instanceof File||ut instanceof Blob||ut instanceof FileList&&ut.length>0||ut instanceof FormData&&Array.from(ut.values()).some(function(mt){return X(mt)})||typeof ut=="object"&&ut!==null&&Object.values(ut).some(function(mt){return X(mt)})}(j)&&!dt||j instanceof FormData||(j=m(j)),!(j instanceof FormData)){var Ee=S(W,Wt,j,ae),Me=Ee[1];Wt=E(Ee[0]),j=Me}var $t={url:Wt,method:W,data:j,replace:Mt,preserveScroll:At,preserveState:Q,only:vt,headers:ot,errorBag:T,forceFormData:dt,queryStringArrayFormat:ae,cancelled:!1,completed:!1,interrupted:!1};if(zt($t)!==!1&&function(X){return A("before",{cancelable:!0,detail:{visit:X}})}($t)){this.activeVisit&&this.cancelVisit(this.activeVisit,{interrupted:!0}),this.saveScrollPositions();var ke=this.createVisitId();this.activeVisit=r({},$t,{onCancelToken:pt,onBefore:zt,onStart:Nt,onProgress:Bt,onFinish:xe,onCancel:ve,onSuccess:ye,onError:Te,queryStringArrayFormat:ae,cancelToken:h.CancelToken.source()}),pt({cancel:function(){P.activeVisit&&P.cancelVisit(P.activeVisit,{cancelled:!0})}}),function(X){A("start",{detail:{visit:X}})}($t),Nt($t),h({method:W,url:O(Wt).href,data:W===c.Method.GET?{}:j,params:W===c.Method.GET?j:{},cancelToken:this.activeVisit.cancelToken.token,headers:r({},ot,{Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0},vt.length?{"X-Inertia-Partial-Component":this.page.component,"X-Inertia-Partial-Data":vt.join(",")}:{},T&&T.length?{"X-Inertia-Error-Bag":T}:{},this.page.version?{"X-Inertia-Version":this.page.version}:{}),onUploadProgress:function(X){j instanceof FormData&&(X.percentage=Math.round(X.loaded/X.total*100),function(ut){A("progress",{detail:{progress:ut}})}(X),Bt(X))}}).then(function(X){var ut;if(!P.isInertiaResponse(X))return Promise.reject({response:X});var mt=X.data;vt.length&&mt.component===P.page.component&&(mt.props=r({},P.page.props,mt.props)),At=P.resolvePreserveOption(At,mt),(Q=P.resolvePreserveOption(Q,mt))&&(ut=window.history.state)!=null&&ut.rememberedState&&mt.component===P.page.component&&(mt.rememberedState=window.history.state.rememberedState);var te=Wt,It=E(mt.url);return te.hash&&!It.hash&&O(te).href===It.href&&(It.hash=te.hash,mt.url=It.href),P.setPage(mt,{visitId:ke,replace:Mt,preserveScroll:At,preserveState:Q})}).then(function(){var X=P.page.props.errors||{};if(Object.keys(X).length>0){var ut=T?X[T]?X[T]:{}:X;return function(mt){A("error",{detail:{errors:mt}})}(ut),Te(ut)}return A("success",{detail:{page:P.page}}),ye(P.page)}).catch(function(X){if(P.isInertiaResponse(X.response))return P.setPage(X.response.data,{visitId:ke});if(P.isLocationVisitResponse(X.response)){var ut=E(X.response.headers["x-inertia-location"]),mt=Wt;mt.hash&&!ut.hash&&O(mt).href===ut.href&&(ut.hash=mt.hash),P.locationVisit(ut,At===!0)}else{if(!X.response)return Promise.reject(X);A("invalid",{cancelable:!0,detail:{response:X.response}})&&f.show(X.response.data)}}).then(function(){P.activeVisit&&P.finishVisit(P.activeVisit)}).catch(function(X){if(!h.isCancel(X)){var ut=A("exception",{cancelable:!0,detail:{exception:X}});if(P.activeVisit&&P.finishVisit(P.activeVisit),ut)return Promise.reject(X)}})}},M.setPage=function(p,w){var P=this,D=w===void 0?{}:w,B=D.visitId,W=B===void 0?this.createVisitId():B,q=D.replace,j=q!==void 0&&q,at=D.preserveScroll,Mt=at!==void 0&&at,G=D.preserveState,At=G!==void 0&&G;return Promise.resolve(this.resolveComponent(p.component)).then(function(F){W===P.visitId&&(p.scrollRegions=p.scrollRegions||[],p.rememberedState=p.rememberedState||{},(j=j||E(p.url).href===window.location.href)?P.replaceState(p):P.pushState(p),P.swapComponent({component:F,page:p,preserveState:At}).then(function(){Mt||P.resetScrollPositions(),j||N(p)}))})},M.pushState=function(p){this.page=p,window.history.pushState(p,"",p.url)},M.replaceState=function(p){this.page=p,window.history.replaceState(p,"",p.url)},M.handlePopstateEvent=function(p){var w=this;if(p.state!==null){var P=p.state,D=this.createVisitId();Promise.resolve(this.resolveComponent(P.component)).then(function(W){D===w.visitId&&(w.page=P,w.swapComponent({component:W,page:P,preserveState:!1}).then(function(){w.restoreScrollPositions(),N(P)}))})}else{var B=E(this.page.url);B.hash=window.location.hash,this.replaceState(r({},this.page,{url:B.href})),this.resetScrollPositions()}},M.get=function(p,w,P){return w===void 0&&(w={}),P===void 0&&(P={}),this.visit(p,r({},P,{method:c.Method.GET,data:w}))},M.reload=function(p){return p===void 0&&(p={}),this.visit(window.location.href,r({},p,{preserveScroll:!0,preserveState:!0}))},M.replace=function(p,w){var P;return w===void 0&&(w={}),console.warn("Inertia.replace() has been deprecated and will be removed in a future release. Please use Inertia."+((P=w.method)!=null?P:"get")+"() instead."),this.visit(p,r({preserveState:!0},w,{replace:!0}))},M.post=function(p,w,P){return w===void 0&&(w={}),P===void 0&&(P={}),this.visit(p,r({preserveState:!0},P,{method:c.Method.POST,data:w}))},M.put=function(p,w,P){return w===void 0&&(w={}),P===void 0&&(P={}),this.visit(p,r({preserveState:!0},P,{method:c.Method.PUT,data:w}))},M.patch=function(p,w,P){return w===void 0&&(w={}),P===void 0&&(P={}),this.visit(p,r({preserveState:!0},P,{method:c.Method.PATCH,data:w}))},M.delete=function(p,w){return w===void 0&&(w={}),this.visit(p,r({preserveState:!0},w,{method:c.Method.DELETE}))},M.remember=function(p,w){var P,D;w===void 0&&(w="default"),Z||this.replaceState(r({},this.page,{rememberedState:r({},(P=this.page)==null?void 0:P.rememberedState,(D={},D[w]=p,D))}))},M.restore=function(p){var w,P;if(p===void 0&&(p="default"),!Z)return(w=window.history.state)==null||(P=w.rememberedState)==null?void 0:P[p]},M.on=function(p,w){var P=function(D){var B=w(D);D.cancelable&&!D.defaultPrevented&&B===!1&&D.preventDefault()};return document.addEventListener("inertia:"+p,P),function(){return document.removeEventListener("inertia:"+p,P)}},C}(),et={buildDOMElement:function(C){var M=document.createElement("template");M.innerHTML=C;var p=M.content.firstChild;if(!C.startsWith("<script "))return p;var w=document.createElement("script");return w.innerHTML=p.innerHTML,p.getAttributeNames().forEach(function(P){w.setAttribute(P,p.getAttribute(P)||"")}),w},isInertiaManagedElement:function(C){return C.nodeType===Node.ELEMENT_NODE&&C.getAttribute("inertia")!==null},findMatchingElementIndex:function(C,M){var p=C.getAttribute("inertia");return p!==null?M.findIndex(function(w){return w.getAttribute("inertia")===p}):-1},update:_(function(C){var M=this,p=C.map(function(w){return M.buildDOMElement(w)});Array.from(document.head.childNodes).filter(function(w){return M.isInertiaManagedElement(w)}).forEach(function(w){var P=M.findMatchingElementIndex(w,p);if(P!==-1){var D,B=p.splice(P,1)[0];B&&!w.isEqualNode(B)&&(w==null||(D=w.parentNode)==null||D.replaceChild(B,w))}else{var W;w==null||(W=w.parentNode)==null||W.removeChild(w)}}),p.forEach(function(w){return document.head.appendChild(w)})},1)},rt=new U;c.Inertia=rt,c.createHeadManager=function(C,M,p){var w={},P=0;function D(){var W=Object.values(w).reduce(function(q,j){return q.concat(j)},[]).reduce(function(q,j){if(j.indexOf("<")===-1)return q;if(j.indexOf("<title ")===0){var at=j.match(/(<title [^>]+>)(.*?)(<\/title>)/);return q.title=at?""+at[1]+M(at[2])+at[3]:j,q}var Mt=j.match(/ inertia="[^"]+"/);return Mt?q[Mt[0]]=j:q[Object.keys(q).length]=j,q},{});return Object.values(W)}function B(){C?p(D()):et.update(D())}return{createProvider:function(){var W=function(){var q=P+=1;return w[q]=[],q.toString()}();return{update:function(q){return function(j,at){at===void 0&&(at=[]),j!==null&&Object.keys(w).indexOf(j)>-1&&(w[j]=at),B()}(W,q)},disconnect:function(){return function(q){q!==null&&Object.keys(w).indexOf(q)!==-1&&(delete w[q],B())}(W)}}}}},c.hrefToUrl=E,c.mergeDataIntoQueryString=S,c.shouldIntercept=function(C){var M=C.currentTarget.tagName.toLowerCase()==="a";return!(C.target&&C!=null&&C.target.isContentEditable||C.defaultPrevented||M&&C.which>1||M&&C.altKey||M&&C.ctrlKey||M&&C.metaKey||M&&C.shiftKey)},c.urlWithoutHash=O}(hn)),hn}var za=Aa();let Un=1;var Ba=class{constructor(){St(this,"subscribers");St(this,"toasts");St(this,"dismissedToasts");St(this,"subscribe",c=>(this.subscribers.push(c),()=>{const l=this.subscribers.indexOf(c);this.subscribers.splice(l,1)}));St(this,"publish",c=>{this.subscribers.forEach(l=>l(c))});St(this,"addToast",c=>{this.publish(c),this.toasts=[...this.toasts,c]});St(this,"create",c=>{var s;const{message:l,...h}=c,d=typeof c.id=="number"||c.id&&((s=c.id)==null?void 0:s.length)>0?c.id:Un++,n=this.toasts.find(f=>f.id===d),r=c.dismissible===void 0?!0:c.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),n?this.toasts=this.toasts.map(f=>f.id===d?(this.publish({...f,...c,id:d,title:l}),{...f,...c,id:d,dismissible:r,title:l}):f):this.addToast({title:l,...h,dismissible:r,id:d}),d});St(this,"dismiss",c=>(c?(this.dismissedToasts.add(c),requestAnimationFrame(()=>this.subscribers.forEach(l=>l({id:c,dismiss:!0})))):this.toasts.forEach(l=>{this.subscribers.forEach(h=>h({id:l.id,dismiss:!0}))}),c));St(this,"message",(c,l)=>this.create({...l,message:c,type:"default"}));St(this,"error",(c,l)=>this.create({...l,type:"error",message:c}));St(this,"success",(c,l)=>this.create({...l,type:"success",message:c}));St(this,"info",(c,l)=>this.create({...l,type:"info",message:c}));St(this,"warning",(c,l)=>this.create({...l,type:"warning",message:c}));St(this,"loading",(c,l)=>this.create({...l,type:"loading",message:c}));St(this,"promise",(c,l)=>{if(!l)return;let h;l.loading!==void 0&&(h=this.create({...l,promise:c,type:"loading",message:l.loading,description:typeof l.description!="function"?l.description:void 0}));const d=Promise.resolve(c instanceof Function?c():c);let n=h!==void 0,r;const s=d.then(async _=>{if(r=["resolve",_],ai(_))n=!1,this.create({id:h,type:"default",message:_});else if(Na(_)&&!_.ok){n=!1;const g=typeof l.error=="function"?await l.error(`HTTP error! status: ${_.status}`):l.error,y=typeof l.description=="function"?await l.description(`HTTP error! status: ${_.status}`):l.description,S=typeof g=="object"&&!ai(g)?g:{message:g||"",id:h||""};this.create({id:h,type:"error",description:y,...S})}else if(_ instanceof Error){n=!1;const g=typeof l.error=="function"?await l.error(_):l.error,y=typeof l.description=="function"?await l.description(_):l.description,S=typeof g=="object"&&!ai(g)?g:{message:g||"",id:h||""};this.create({id:h,type:"error",description:y,...S})}else if(l.success!==void 0){n=!1;const g=typeof l.success=="function"?await l.success(_):l.success,y=typeof l.description=="function"?await l.description(_):l.description,S=typeof g=="object"&&!ai(g)?g:{message:g||"",id:h||""};this.create({id:h,type:"success",description:y,...S})}}).catch(async _=>{if(r=["reject",_],l.error!==void 0){n=!1;const m=typeof l.error=="function"?await l.error(_):l.error,g=typeof l.description=="function"?await l.description(_):l.description,E=typeof m=="object"&&!ai(m)?m:{message:m||"",id:h||""};this.create({id:h,type:"error",description:g,...E})}}).finally(()=>{var _;n&&(this.dismiss(h),h=void 0),(_=l.finally)==null||_.call(l)}),f=()=>new Promise((_,m)=>s.then(()=>r[0]==="reject"?m(r[1]):_(r[1])).catch(m));return typeof h!="string"&&typeof h!="number"?{unwrap:f}:Object.assign(h,{unwrap:f})});St(this,"custom",(c,l)=>{const h=(l==null?void 0:l.id)||Un++;return this.publish({component:c,id:h,...l}),h});St(this,"getActiveToasts",()=>this.toasts.filter(c=>!this.dismissedToasts.has(c.id)));this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}};const Ft=new Ba;function Ra(c,l){const h=(l==null?void 0:l.id)||Un++;return Ft.create({message:c,id:h,type:"default",...l}),h}const Na=c=>c&&typeof c=="object"&&"ok"in c&&typeof c.ok=="boolean"&&"status"in c&&typeof c.status=="number",Za=Ra,Ua=()=>Ft.toasts,Fa=()=>Ft.getActiveToasts(),re=Object.assign(Za,{success:Ft.success,info:Ft.info,warning:Ft.warning,error:Ft.error,custom:Ft.custom,message:Ft.message,promise:Ft.promise,dismiss:Ft.dismiss,loading:Ft.loading},{getHistory:Ua,getToasts:Fa});function Di(c){return c.label!==void 0}const Ha=3,zr="24px",Br="16px",Pr=4e3,Ga=356,Va=14,qa=45,ja=200;function Wa(){const c=gt(!1);return We(()=>{const l=()=>{c.value=document.hidden};return document.addEventListener("visibilitychange",l),()=>window.removeEventListener("visibilitychange",l)}),{isDocumentHidden:c}}function be(...c){return c.filter(Boolean).join(" ")}function Ya(c){const[l,h]=c.split("-"),d=[];return l&&d.push(l),h&&d.push(h),d}function Ka(c,l){const h={};return[c,l].forEach((d,n)=>{const r=n===1,s=r?"--mobile-offset":"--offset",f=r?Br:zr;function _(m){["top","right","bottom","left"].forEach(g=>{h[`${s}-${g}`]=typeof m=="number"?`${m}px`:m})}typeof d=="number"||typeof d=="string"?_(d):typeof d=="object"?["top","right","bottom","left"].forEach(m=>{d[m]===void 0?h[`${s}-${m}`]=f:h[`${s}-${m}`]=typeof d[m]=="number"?`${d[m]}px`:d[m]}):_(f)}),h}const Xa=["data-rich-colors","data-styled","data-mounted","data-promise","data-swiped","data-removed","data-visible","data-y-position","data-x-position","data-index","data-front","data-swiping","data-dismissible","data-type","data-invert","data-swipe-out","data-swipe-direction","data-expanded"],$a=["aria-label","data-disabled"];var Ja=Fn({__name:"Toast",props:{toast:{},toasts:{},index:{},swipeDirections:{},expanded:{type:Boolean},invert:{type:Boolean},heights:{},gap:{},position:{},visibleToasts:{},expandByDefault:{type:Boolean},closeButton:{type:Boolean},interacting:{type:Boolean},style:{},cancelButtonStyle:{},actionButtonStyle:{},duration:{},class:{},unstyled:{type:Boolean},descriptionClass:{},loadingIcon:{},classes:{},icons:{},closeButtonAriaLabel:{},defaultRichColors:{type:Boolean}},emits:["update:heights","removeToast"],setup(c,{emit:l}){const h=c,d=l,n=gt(null),r=gt(null),s=gt(!1),f=gt(!1),_=gt(!1),m=gt(!1),g=gt(!1),y=gt(0),E=gt(0),S=gt(h.toast.duration||h.duration||Pr),O=gt(null),A=gt(null),z=Et(()=>h.index===0),N=Et(()=>h.index+1<=h.visibleToasts),Z=Et(()=>h.toast.type),U=Et(()=>h.toast.dismissible!==!1),et=Et(()=>h.toast.class||""),rt=Et(()=>h.descriptionClass||""),C=Et(()=>h.heights.findIndex(T=>T.toastId===h.toast.id)||0),M=Et(()=>h.toast.closeButton??h.closeButton),p=Et(()=>h.toast.duration||h.duration||Pr),w=gt(0),P=gt(0),D=gt(null),B=Et(()=>h.position.split("-")),W=Et(()=>B.value[0]),q=Et(()=>B.value[1]),j=Et(()=>typeof h.toast.title!="string"),at=Et(()=>typeof h.toast.description!="string"),{isDocumentHidden:Mt}=Wa(),G=Et(()=>Z.value&&Z.value==="loading"),At=Et(()=>h.heights.reduce((T,it,dt)=>dt>=C.value?T:T+it.height,0)),F=Et(()=>C.value*h.gap+At.value||0);ln(()=>{S.value=p.value}),ln(()=>{if(!s.value)return;const T=A.value,it=T==null?void 0:T.style.height;T.style.height="auto";const dt=T.getBoundingClientRect().height;T.style.height=it,E.value=dt;let ft;h.heights.find(lt=>lt.toastId===h.toast.id)?ft=h.heights.map(lt=>lt.toastId===h.toast.id?{...lt,height:dt}:lt):ft=[{toastId:h.toast.id,height:dt,position:h.toast.position},...h.heights],d("update:heights",ft)});function Q(){f.value=!0,y.value=F.value;const T=h.heights.filter(it=>it.toastId!==h.toast.id);d("update:heights",T),setTimeout(()=>{d("removeToast",h.toast)},ja)}function yt(){var T,it;if(G.value||!U.value)return{};Q(),(it=(T=h.toast).onDismiss)==null||it.call(T,h.toast)}function vt(T){G.value||!U.value||(O.value=new Date,y.value=F.value,T.target.setPointerCapture(T.pointerId),T.target.tagName!=="BUTTON"&&(_.value=!0,D.value={x:T.clientX,y:T.clientY}))}function ct(){var lt,zt,Gt,Nt,Zt,Bt,bt;if(m.value||!U.value)return;D.value=null;const T=Number(((lt=A.value)==null?void 0:lt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),it=Number(((zt=A.value)==null?void 0:zt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),dt=new Date().getTime()-(((Gt=O.value)==null?void 0:Gt.getTime())||0),ft=n.value==="x"?T:it,pt=Math.abs(ft)/dt;if(Math.abs(ft)>=qa||pt>.11){y.value=F.value,(Zt=(Nt=h.toast).onDismiss)==null||Zt.call(Nt,h.toast),n.value==="x"?r.value=T>0?"right":"left":r.value=it>0?"down":"up",Q(),m.value=!0;return}else(Bt=A.value)==null||Bt.style.setProperty("--swipe-amount-x","0px"),(bt=A.value)==null||bt.style.setProperty("--swipe-amount-y","0px");g.value=!1,_.value=!1,n.value=null}function ot(T){var Gt,Nt,Zt,Bt;if(!D.value||!U.value||(((Nt=(Gt=window==null?void 0:window.getSelection())==null?void 0:Gt.toString())==null?void 0:Nt.length)??!1))return;const dt=T.clientY-D.value.y,ft=T.clientX-D.value.x,pt=h.swipeDirections??Ya(h.position);!n.value&&(Math.abs(ft)>1||Math.abs(dt)>1)&&(n.value=Math.abs(ft)>Math.abs(dt)?"x":"y");let lt={x:0,y:0};const zt=bt=>1/(1.5+Math.abs(bt)/20);if(n.value==="y"){if(pt.includes("top")||pt.includes("bottom"))if(pt.includes("top")&&dt<0||pt.includes("bottom")&&dt>0)lt.y=dt;else{const bt=dt*zt(dt);lt.y=Math.abs(bt)<Math.abs(dt)?bt:dt}}else if(n.value==="x"&&(pt.includes("left")||pt.includes("right")))if(pt.includes("left")&&ft<0||pt.includes("right")&&ft>0)lt.x=ft;else{const bt=ft*zt(ft);lt.x=Math.abs(bt)<Math.abs(ft)?bt:ft}(Math.abs(lt.x)>0||Math.abs(lt.y)>0)&&(g.value=!0),(Zt=A.value)==null||Zt.style.setProperty("--swipe-amount-x",`${lt.x}px`),(Bt=A.value)==null||Bt.style.setProperty("--swipe-amount-y",`${lt.y}px`)}ln(()=>{if(s.value=!0,!A.value)return;const T=A.value.getBoundingClientRect().height;E.value=T;const it=[{toastId:h.toast.id,height:T,position:h.toast.position},...h.heights];d("update:heights",it)}),oa(()=>{if(A.value){const T=h.heights.filter(it=>it.toastId!==h.toast.id);d("update:heights",T)}}),We(T=>{if(h.toast.promise&&Z.value==="loading"||h.toast.duration===1/0||h.toast.type==="loading")return;let it;const dt=()=>{if(P.value<w.value){const pt=new Date().getTime()-w.value;S.value=S.value-pt}P.value=new Date().getTime()},ft=()=>{S.value!==1/0&&(w.value=new Date().getTime(),it=setTimeout(()=>{var pt,lt;(lt=(pt=h.toast).onAutoClose)==null||lt.call(pt,h.toast),Q()},S.value))};h.expanded||h.interacting||Mt.value?dt():ft(),T(()=>{clearTimeout(it)})}),Er(()=>h.toast.delete,T=>{T!==void 0&&T&&Q()},{deep:!0});function J(){_.value=!1,n.value=null,D.value=null}return(T,it)=>{var dt,ft,pt,lt,zt,Gt,Nt,Zt,Bt,bt,xe,_e,ve,ge,ye,Pe,Te,se,ae,Wt,Ee,Me,$t,ke,X,ut,mt;return Y(),nt("li",{tabindex:"0",ref_key:"toastRef",ref:A,class:fe(Dt(be)(h.class,et.value,(dt=T.classes)==null?void 0:dt.toast,(ft=T.toast.classes)==null?void 0:ft.toast,(pt=T.classes)==null?void 0:pt[Z.value],(zt=(lt=T.toast)==null?void 0:lt.classes)==null?void 0:zt[Z.value])),"data-sonner-toast":"","data-rich-colors":T.toast.richColors??T.defaultRichColors,"data-styled":!(T.toast.component||(Gt=T.toast)!=null&&Gt.unstyled||T.unstyled),"data-mounted":s.value,"data-promise":!!T.toast.promise,"data-swiped":g.value,"data-removed":f.value,"data-visible":N.value,"data-y-position":W.value,"data-x-position":q.value,"data-index":T.index,"data-front":z.value,"data-swiping":_.value,"data-dismissible":U.value,"data-type":Z.value,"data-invert":T.toast.invert||T.invert,"data-swipe-out":m.value,"data-swipe-direction":r.value,"data-expanded":!!(T.expanded||T.expandByDefault&&s.value),style:hi({"--index":T.index,"--toasts-before":T.index,"--z-index":T.toasts.length-T.index,"--offset":`${f.value?y.value:F.value}px`,"--initial-height":T.expandByDefault?"auto":`${E.value}px`,...T.style,...h.toast.style}),onDragend:J,onPointerdown:vt,onPointerup:ct,onPointermove:ot},[M.value&&!T.toast.component&&Z.value!=="loading"?(Y(),nt("button",{key:0,"aria-label":T.closeButtonAriaLabel||"Close toast","data-disabled":G.value,"data-close-button":"true",class:fe(Dt(be)((Nt=T.classes)==null?void 0:Nt.closeButton,(Bt=(Zt=T.toast)==null?void 0:Zt.classes)==null?void 0:Bt.closeButton)),onClick:yt},[(bt=T.icons)!=null&&bt.close?(Y(),Be(si((xe=T.icons)==null?void 0:xe.close),{key:0})):Ht(T.$slots,"close-icon",{key:1})],10,$a)):qt("v-if",!0),T.toast.component?(Y(),Be(si(T.toast.component),Oi({key:1},T.toast.componentProps,{onCloseToast:yt}),null,16)):(Y(),nt(me,{key:2},[Z.value!=="default"||T.toast.icon||T.toast.promise?(Y(),nt("div",{key:0,"data-icon":"",class:fe(Dt(be)((_e=T.classes)==null?void 0:_e.icon,(ge=(ve=T.toast)==null?void 0:ve.classes)==null?void 0:ge.icon))},[T.toast.icon?(Y(),Be(si(T.toast.icon),{key:0})):(Y(),nt(me,{key:1},[Z.value==="loading"?Ht(T.$slots,"loading-icon",{key:0}):Z.value==="success"?Ht(T.$slots,"success-icon",{key:1}):Z.value==="error"?Ht(T.$slots,"error-icon",{key:2}):Z.value==="warning"?Ht(T.$slots,"warning-icon",{key:3}):Z.value==="info"?Ht(T.$slots,"info-icon",{key:4}):qt("v-if",!0)],64))],2)):qt("v-if",!0),I("div",{"data-content":"",class:fe(Dt(be)((ye=T.classes)==null?void 0:ye.content,(Te=(Pe=T.toast)==null?void 0:Pe.classes)==null?void 0:Te.content))},[I("div",{"data-title":"",class:fe(Dt(be)((se=T.classes)==null?void 0:se.title,(ae=T.toast.classes)==null?void 0:ae.title))},[j.value?(Y(),Be(si(T.toast.title),Go(Oi({key:0},T.toast.componentProps)),null,16)):(Y(),nt(me,{key:1},[Re(Ot(T.toast.title),1)],64))],2),T.toast.description?(Y(),nt("div",{key:0,"data-description":"",class:fe(Dt(be)(T.descriptionClass,rt.value,(Wt=T.classes)==null?void 0:Wt.description,(Ee=T.toast.classes)==null?void 0:Ee.description))},[at.value?(Y(),Be(si(T.toast.description),Go(Oi({key:0},T.toast.componentProps)),null,16)):(Y(),nt(me,{key:1},[Re(Ot(T.toast.description),1)],64))],2)):qt("v-if",!0)],2),T.toast.cancel?(Y(),nt("button",{key:1,style:hi(T.toast.cancelButtonStyle||T.cancelButtonStyle),class:fe(Dt(be)((Me=T.classes)==null?void 0:Me.cancelButton,($t=T.toast.classes)==null?void 0:$t.cancelButton)),"data-button":"","data-cancel":"",onClick:it[0]||(it[0]=te=>{var It,Se;Dt(Di)(T.toast.cancel)&&U.value&&((Se=(It=T.toast.cancel).onClick)==null||Se.call(It,te),Q())})},Ot(Dt(Di)(T.toast.cancel)?(ke=T.toast.cancel)==null?void 0:ke.label:T.toast.cancel),7)):qt("v-if",!0),T.toast.action?(Y(),nt("button",{key:2,style:hi(T.toast.actionButtonStyle||T.actionButtonStyle),class:fe(Dt(be)((X=T.classes)==null?void 0:X.actionButton,(ut=T.toast.classes)==null?void 0:ut.actionButton)),"data-button":"","data-action":"",onClick:it[1]||(it[1]=te=>{var It,Se;Dt(Di)(T.toast.action)&&((Se=(It=T.toast.action).onClick)==null||Se.call(It,te),!te.defaultPrevented&&Q())})},Ot(Dt(Di)(T.toast.action)?(mt=T.toast.action)==null?void 0:mt.label:T.toast.action),7)):qt("v-if",!0)],64))],46,Xa)}}}),Qa=Ja,ui=(c,l)=>{const h=c.__vccOpts||c;for(const[d,n]of l)h[d]=n;return h};const tl={},el={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stoke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function il(c,l){return Y(),nt("svg",el,l[0]||(l[0]=[I("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),I("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)]))}var nl=ui(tl,[["render",il]]);const ol=["data-visible"],rl={class:"sonner-spinner"};var sl=Fn({__name:"Loader",props:{visible:{type:Boolean}},setup(c){const l=Array(12).fill(0);return(h,d)=>(Y(),nt("div",{class:"sonner-loading-wrapper","data-visible":h.visible},[I("div",rl,[(Y(!0),nt(me,null,Zn(Dt(l),n=>(Y(),nt("div",{key:`spinner-bar-${n}`,class:"sonner-loading-bar"}))),128))])],8,ol))}}),al=sl;const ll={},hl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"};function ul(c,l){return Y(),nt("svg",hl,l[0]||(l[0]=[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1)]))}var cl=ui(ll,[["render",ul]]);const dl={},fl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"};function pl(c,l){return Y(),nt("svg",fl,l[0]||(l[0]=[I("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule":"evenodd"},null,-1)]))}var ml=ui(dl,[["render",pl]]);const _l={},vl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"};function gl(c,l){return Y(),nt("svg",vl,l[0]||(l[0]=[I("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"},null,-1)]))}var yl=ui(_l,[["render",gl]]);const Ll={},wl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"};function bl(c,l){return Y(),nt("svg",wl,l[0]||(l[0]=[I("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1)]))}var xl=ui(Ll,[["render",bl]]);const Pl=["aria-label"],Tl=["data-sonner-theme","dir","data-theme","data-rich-colors","data-y-position","data-x-position","data-lifted"],El=typeof window<"u"&&typeof document<"u";function Ml(){if(typeof window>"u"||typeof document>"u")return"ltr";const c=document.documentElement.getAttribute("dir");return c==="auto"||!c?window.getComputedStyle(document.documentElement).direction:c}var kl=Fn({name:"Toaster",inheritAttrs:!1,__name:"Toaster",props:{invert:{type:Boolean,default:!1},theme:{default:"light"},position:{default:"bottom-right"},hotkey:{default:()=>["altKey","KeyT"]},richColors:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},duration:{},gap:{default:Va},visibleToasts:{default:Ha},closeButton:{type:Boolean,default:!1},toastOptions:{default:()=>({})},class:{default:""},style:{},offset:{default:zr},mobileOffset:{default:Br},dir:{default:"auto"},swipeDirections:{},icons:{},containerAriaLabel:{default:"Notifications"}},setup(c){const l=c,h=na(),d=gt([]);function n(p,w){return d.value.filter(P=>!P.position&&w===0||P.position===p)}const r=Et(()=>{const p=d.value.filter(w=>w.position).map(w=>w.position);return p.length>0?Array.from(new Set([l.position].concat(p))):[l.position]}),s=Et(()=>{const p={};return r.value.forEach(w=>{p[w]=d.value.filter(P=>P.position===w)}),p}),f=gt([]),_=gt(!1),m=gt(!1),g=gt(l.theme!=="system"?l.theme:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),y=gt(null),E=gt(null),S=gt(!1),O=l.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,"");function A(p){var w;(w=d.value.find(P=>P.id===p.id))!=null&&w.delete||Ft.dismiss(p.id),d.value=d.value.filter(({id:P})=>P!==p.id)}function z(p){var w,P;S.value&&!((P=(w=p.currentTarget)==null?void 0:w.contains)!=null&&P.call(w,p.relatedTarget))&&(S.value=!1,E.value&&(E.value.focus({preventScroll:!0}),E.value=null))}function N(p){p.target instanceof HTMLElement&&p.target.dataset.dismissible==="false"||S.value||(S.value=!0,E.value=p.relatedTarget)}function Z(p){p.target&&p.target instanceof HTMLElement&&p.target.dataset.dismissible==="false"||(m.value=!0)}We(p=>{const w=Ft.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{d.value=d.value.map(D=>D.id===P.id?{...D,delete:!0}:D)});return}ra(()=>{const D=d.value.findIndex(B=>B.id===P.id);D!==-1?d.value=[...d.value.slice(0,D),{...d.value[D],...P},...d.value.slice(D+1)]:d.value=[P,...d.value]})});p(w)}),Er(()=>l.theme,p=>{if(p!=="system"){g.value=p;return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?g.value="dark":g.value="light"),typeof window>"u")return;const w=window.matchMedia("(prefers-color-scheme: dark)");try{w.addEventListener("change",({matches:P})=>{P?g.value="dark":g.value="light"})}catch{w.addListener(({matches:D})=>{try{D?g.value="dark":g.value="light"}catch(B){console.error(B)}})}}),We(()=>{y.value&&E.value&&(E.value.focus({preventScroll:!0}),E.value=null,S.value=!1)}),We(()=>{d.value.length<=1&&(_.value=!1)}),We(p=>{function w(P){const D=l.hotkey.every(q=>P[q]||P.code===q),B=Array.isArray(y.value)?y.value[0]:y.value;D&&(_.value=!0,B==null||B.focus());const W=document.activeElement===y.value||(B==null?void 0:B.contains(document.activeElement));P.code==="Escape"&&W&&(_.value=!1)}El&&(document.addEventListener("keydown",w),p(()=>{document.removeEventListener("keydown",w)}))});function U(){_.value=!0}function et(){m.value||(_.value=!1)}function rt(){_.value=!1}function C(){m.value=!1}function M(p){f.value=p}return(p,w)=>(Y(),nt(me,null,[qt(" Remove item from normal navigation flow, only available via hotkey "),I("section",{"aria-label":`${p.containerAriaLabel} ${Dt(O)}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},[(Y(!0),nt(me,null,Zn(r.value,(P,D)=>{var B;return Y(),nt("ol",Oi({key:P,ref_for:!0,ref_key:"listRef",ref:y,"data-sonner-toaster":"","data-sonner-theme":g.value,class:l.class,dir:p.dir==="auto"?Ml():p.dir,tabIndex:-1,"data-theme":p.theme,"data-rich-colors":p.richColors,"data-y-position":P.split("-")[0],"data-x-position":P.split("-")[1],"data-lifted":_.value&&d.value.length>1&&!p.expand,style:{"--front-toast-height":`${((B=f.value[0])==null?void 0:B.height)||0}px`,"--width":`${Dt(Ga)}px`,"--gap":`${p.gap}px`,...p.style,...Dt(h).style,...Dt(Ka)(p.offset,p.mobileOffset)}},p.$attrs,{onBlur:z,onFocus:N,onMouseenter:U,onMousemove:U,onMouseleave:et,onDragend:rt,onPointerdown:Z,onPointerup:C}),[(Y(!0),nt(me,null,Zn(n(P,D),(W,q)=>{var j,at,Mt,G,At,F,Q,yt,vt,ct;return Y(),Be(Qa,{key:W.id,heights:f.value.filter(ot=>ot.position===W.position),icons:p.icons,index:q,toast:W,defaultRichColors:p.richColors,duration:((j=p.toastOptions)==null?void 0:j.duration)??p.duration,class:fe(((at=p.toastOptions)==null?void 0:at.class)??""),descriptionClass:(Mt=p.toastOptions)==null?void 0:Mt.descriptionClass,invert:p.invert,visibleToasts:p.visibleToasts,closeButton:((G=p.toastOptions)==null?void 0:G.closeButton)??p.closeButton,interacting:m.value,position:P,style:hi((At=p.toastOptions)==null?void 0:At.style),unstyled:(F=p.toastOptions)==null?void 0:F.unstyled,classes:(Q=p.toastOptions)==null?void 0:Q.classes,cancelButtonStyle:(yt=p.toastOptions)==null?void 0:yt.cancelButtonStyle,actionButtonStyle:(vt=p.toastOptions)==null?void 0:vt.actionButtonStyle,"close-button-aria-label":(ct=p.toastOptions)==null?void 0:ct.closeButtonAriaLabel,toasts:s.value[P],expandByDefault:p.expand,gap:p.gap,expanded:_.value,swipeDirections:l.swipeDirections,"onUpdate:heights":M,onRemoveToast:A},{"close-icon":ze(()=>[Ht(p.$slots,"close-icon",{},()=>[pe(nl)])]),"loading-icon":ze(()=>[Ht(p.$slots,"loading-icon",{},()=>[pe(al,{visible:W.type==="loading"},null,8,["visible"])])]),"success-icon":ze(()=>[Ht(p.$slots,"success-icon",{},()=>[pe(cl)])]),"error-icon":ze(()=>[Ht(p.$slots,"error-icon",{},()=>[pe(xl)])]),"warning-icon":ze(()=>[Ht(p.$slots,"warning-icon",{},()=>[pe(yl)])]),"info-icon":ze(()=>[Ht(p.$slots,"info-icon",{},()=>[pe(ml)])]),_:2},1032,["heights","icons","index","toast","defaultRichColors","duration","class","descriptionClass","invert","visibleToasts","closeButton","interacting","position","style","unstyled","classes","cancelButtonStyle","actionButtonStyle","close-button-aria-label","toasts","expandByDefault","gap","expanded","swipeDirections"])}),128))],16,Tl)}),128))],8,Pl)],2112))}}),Sl=kl;const Ii=(c,l)=>{const h=c.__vccOpts||c;for(const[d,n]of l)h[d]=n;return h},Cl={props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:"Confirm Action"},message:{type:String,required:!0},confirmText:{type:String,default:"Continue"},cancelText:{type:String,default:"Cancel"},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Processing..."}},watch:{modelValue(c){console.log("ConfirmDialog modelValue changed:",c),c&&setTimeout(()=>{document.querySelector('div[style*="z-index: 9999"]')},100)}},mounted(){console.log("ConfirmDialog mounted, modelValue:",this.modelValue)},methods:{confirm(){this.$emit("confirm")},cancel(){this.$emit("cancel"),this.$emit("update:modelValue",!1)}}},Dl={key:0,style:{position:"fixed !important",top:"0 !important",left:"0 !important",right:"0 !important",bottom:"0 !important",height:"100vh !important",width:"100vw !important","z-index":"9999 !important",display:"flex !important","align-items":"center !important","justify-content":"center !important","background-color":"rgba(0, 0, 0, 0.5) !important"}},Ol={style:{background:"white !important","border-radius":"8px !important","box-shadow":"0 5px 20px rgba(0,0,0,0.2) !important",width:"95% !important","max-width":"500px !important",margin:"0 auto !important",overflow:"hidden !important"}},Il={style:{padding:"16px 24px !important"}},Al={style:{"font-size":"18px !important","font-weight":"600 !important","margin-bottom":"8px !important",color:"#111827 !important"}},zl={style:{color:"#4B5563 !important","font-size":"14px !important"}},Bl={style:{padding:"16px 24px !important","background-color":"#F9FAFB !important",display:"flex !important","justify-content":"flex-end !important",gap:"12px !important","border-top":"1px solid #E5E7EB !important"}},Rl=["disabled"];function Nl(c,l,h,d,n,r){return h.modelValue?(Y(),nt("div",Dl,[I("div",Ol,[I("div",Il,[I("h3",Al,Ot(h.title),1),I("p",zl,Ot(h.message),1)]),I("div",Bl,[I("button",{onClick:l[0]||(l[0]=(...s)=>r.cancel&&r.cancel(...s)),style:{padding:"8px 16px !important",border:"1px solid #D1D5DB !important","border-radius":"6px !important","font-size":"14px !important","font-weight":"500 !important","background-color":"white !important",color:"#374151 !important",cursor:"pointer !important"}},Ot(h.cancelText),1),I("button",{onClick:l[1]||(l[1]=(...s)=>r.confirm&&r.confirm(...s)),disabled:h.loading,style:{padding:"8px 16px !important","border-radius":"6px !important","font-size":"14px !important","font-weight":"500 !important","background-color":"#2563EB !important",color:"white !important",cursor:"pointer !important",opacity:"loading ? 0.5 : 1 !important"}},Ot(h.loading?h.loadingText:h.confirmText),9,Rl)])])])):qt("",!0)}const Zl=Ii(Cl,[["render",Nl]]),Ul={name:"SidePanel",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Details"},width:{type:String,default:"380px"}},emits:["update:modelValue","close"],methods:{close(){this.$emit("update:modelValue",!1),this.$emit("close")}},computed:{panelStyle(){return{width:this.width,transform:this.modelValue?"translateX(0)":"translateX(100%)"}}},watch:{modelValue(c){c?document.body.classList.add("side-panel-open"):document.body.classList.remove("side-panel-open")}},beforeUnmount(){document.body.classList.remove("side-panel-open")}},Fl={class:"side-panel-header"},Hl={class:"side-panel-content"},Gl={key:0,class:"side-panel-footer"};function Vl(c,l,h,d,n,r){return Vt((Y(),nt("div",{class:"side-panel",style:hi(r.panelStyle)},[I("div",Fl,[I("h3",null,Ot(h.title),1),I("button",{onClick:l[0]||(l[0]=(...s)=>r.close&&r.close(...s)),class:"close-btn"},"")]),I("div",Hl,[Ht(c.$slots,"default",{},void 0,!0)]),c.$slots.footer?(Y(),nt("div",Gl,[Ht(c.$slots,"footer",{},void 0,!0)])):qt("",!0)],4)),[[sa,h.modelValue]])}const ql=Ii(Ul,[["render",Vl],["__scopeId","data-v-51674cd6"]]),jl={name:"ShapeForm",props:{shapeId:{type:[Number,String],required:!0}},data(){return{form:{name:"",description:"",category:"",tags:"",parcel_number:"",area:null,perimeter:null,zoning:"",estimated_value:null,slope:null,is_shared:!1,access_level:0},originalForm:{},loading:!0,saving:!1,error:null}},watch:{shapeId:{immediate:!0,handler(c){c&&this.fetchShapeDetails()}}},methods:{fetchShapeDetails(){this.loading=!0,this.error=null,Vo.get(`/api/measurements/${this.shapeId}`).then(c=>{c.data.measurement?(this.form={...c.data.measurement},this.originalForm={...c.data.measurement}):this.error="Shape not found",this.loading=!1}).catch(c=>{console.error("Error fetching shape details:",c),this.error="Failed to load shape details",this.loading=!1})},saveChanges(){this.saving=!0,Vo.put(`/api/measurements/${this.shapeId}`,this.form).then(c=>{re.success("Shape details saved successfully"),this.saving=!1,c.data.measurement&&(this.form={...c.data.measurement}),this.originalForm={...this.form}}).catch(c=>{re.error("Failed to save shape details"),this.saving=!1,c.response&&c.response.data&&c.response.data.errors?console.error("Validation errors:",c.response.data.errors):console.error("Error saving shape:",c)})},formatArea(c){if(!c||isNaN(parseFloat(c)))return"Not available";const l=parseFloat(c);return l<1e4?`${Math.round(l)} m`:`${(Math.round(l/100)/100).toFixed(2)} hectares`},formatLength(c){if(!c||isNaN(parseFloat(c)))return"Not available";const l=parseFloat(c);return l<1e3?`${Math.round(l)} m`:`${(Math.round(l/10)/100).toFixed(2)} km`}}},Wl={class:"shape-form"},Yl={key:0,class:"loading-state"},Kl={key:1,class:"error-state"},Xl={class:"form-section"},$l={class:"form-group"},Jl={class:"form-group"},Ql={class:"form-group"},th={class:"form-group"},eh={class:"form-section"},ih={class:"form-group"},nh={class:"form-group"},oh={class:"measurement-input-fields"},rh={class:"form-group"},sh={class:"input-with-display"},ah={class:"input-display"},lh={class:"form-group"},hh={class:"input-with-display"},uh={class:"input-display"},ch={class:"form-section"},dh={class:"form-group"},fh={class:"form-group"},ph={class:"form-group"},mh={class:"form-section"},_h={class:"form-group"},vh={class:"checkbox-label"},gh={key:0,class:"form-group"},yh={class:"form-actions"},Lh=["disabled"];function wh(c,l,h,d,n,r){return Y(),nt("div",Wl,[n.loading?(Y(),nt("div",Yl," Loading shape details... ")):n.error?(Y(),nt("div",Kl," Error loading shape: "+Ot(n.error),1)):(Y(),nt("form",{key:2,onSubmit:l[12]||(l[12]=aa((...s)=>r.saveChanges&&r.saveChanges(...s),["prevent"])),class:"shape-details-form"},[I("div",Xl,[l[18]||(l[18]=I("h4",null,"Basic Information",-1)),I("div",$l,[l[13]||(l[13]=I("label",{for:"name"},"Name",-1)),Vt(I("input",{type:"text",id:"name","onUpdate:modelValue":l[0]||(l[0]=s=>n.form.name=s),class:"form-control"},null,512),[[de,n.form.name]])]),I("div",Jl,[l[14]||(l[14]=I("label",{for:"description"},"Description",-1)),Vt(I("input",{type:"text",id:"description","onUpdate:modelValue":l[1]||(l[1]=s=>n.form.description=s),class:"form-control",placeholder:"Describe this shape's purpose or details"},null,512),[[de,n.form.description]])]),I("div",Ql,[l[16]||(l[16]=I("label",{for:"category"},"Category",-1)),Vt(I("select",{id:"category","onUpdate:modelValue":l[2]||(l[2]=s=>n.form.category=s),class:"form-control"},l[15]||(l[15]=[la('<option value="" data-v-a942ceef>Select a category</option><option value="Residential" data-v-a942ceef>Residential</option><option value="Commercial" data-v-a942ceef>Commercial</option><option value="Agricultural" data-v-a942ceef>Agricultural</option><option value="Industrial" data-v-a942ceef>Industrial</option><option value="Recreational" data-v-a942ceef>Recreational</option><option value="Other" data-v-a942ceef>Other</option>',7)]),512),[[qo,n.form.category]])]),I("div",th,[l[17]||(l[17]=I("label",{for:"tags"},"Tags",-1)),Vt(I("input",{type:"text",id:"tags","onUpdate:modelValue":l[3]||(l[3]=s=>n.form.tags=s),class:"form-control",placeholder:"Comma-separated tags"},null,512),[[de,n.form.tags]])])]),I("div",eh,[l[23]||(l[23]=I("h4",null,"Property Information",-1)),I("div",ih,[l[19]||(l[19]=I("label",{for:"parcel_number"},"Parcel Number",-1)),Vt(I("input",{type:"text",id:"parcel_number","onUpdate:modelValue":l[4]||(l[4]=s=>n.form.parcel_number=s),class:"form-control"},null,512),[[de,n.form.parcel_number]])]),I("div",nh,[l[22]||(l[22]=I("label",null,"Measurements",-1)),I("div",oh,[I("div",rh,[l[20]||(l[20]=I("label",{for:"area"},"Area (m)",-1)),I("div",sh,[Vt(I("input",{type:"number",id:"area","onUpdate:modelValue":l[5]||(l[5]=s=>n.form.area=s),class:"form-control",step:"0.01"},null,512),[[de,n.form.area,void 0,{number:!0}]]),I("span",ah,Ot(r.formatArea(n.form.area)),1)])]),I("div",lh,[l[21]||(l[21]=I("label",{for:"perimeter"},"Perimeter (m)",-1)),I("div",hh,[Vt(I("input",{type:"number",id:"perimeter","onUpdate:modelValue":l[6]||(l[6]=s=>n.form.perimeter=s),class:"form-control",step:"0.01"},null,512),[[de,n.form.perimeter,void 0,{number:!0}]]),I("span",uh,Ot(r.formatLength(n.form.perimeter)),1)])])])])]),I("div",ch,[l[27]||(l[27]=I("h4",null,"Additional Information",-1)),I("div",dh,[l[24]||(l[24]=I("label",{for:"zoning"},"Zoning",-1)),Vt(I("input",{type:"text",id:"zoning","onUpdate:modelValue":l[7]||(l[7]=s=>n.form.zoning=s),class:"form-control"},null,512),[[de,n.form.zoning]])]),I("div",fh,[l[25]||(l[25]=I("label",{for:"estimated_value"},"Estimated Value",-1)),Vt(I("input",{type:"number",id:"estimated_value","onUpdate:modelValue":l[8]||(l[8]=s=>n.form.estimated_value=s),class:"form-control",step:"0.01"},null,512),[[de,n.form.estimated_value,void 0,{number:!0}]])]),I("div",ph,[l[26]||(l[26]=I("label",{for:"slope"},"Slope (%)",-1)),Vt(I("input",{type:"number",id:"slope","onUpdate:modelValue":l[9]||(l[9]=s=>n.form.slope=s),class:"form-control",step:"0.01"},null,512),[[de,n.form.slope,void 0,{number:!0}]])])]),I("div",mh,[l[31]||(l[31]=I("h4",null,"Sharing",-1)),I("div",_h,[I("label",vh,[Vt(I("input",{type:"checkbox","onUpdate:modelValue":l[10]||(l[10]=s=>n.form.is_shared=s)},null,512),[[ha,n.form.is_shared]]),l[28]||(l[28]=Re(" Share this shape with others "))])]),n.form.is_shared?(Y(),nt("div",gh,[l[30]||(l[30]=I("label",{for:"access_level"},"Access Level",-1)),Vt(I("select",{id:"access_level","onUpdate:modelValue":l[11]||(l[11]=s=>n.form.access_level=s),class:"form-control"},l[29]||(l[29]=[I("option",{value:"0"},"Private",-1),I("option",{value:"1"},"Team",-1),I("option",{value:"2"},"Public",-1)]),512),[[qo,n.form.access_level]])])):qt("",!0)]),I("div",yh,[I("button",{type:"submit",class:"btn btn-primary",disabled:n.saving},Ot(n.saving?"Saving...":"Save Changes"),9,Lh)])],32))])}const bh=Ii(jl,[["render",wh],["__scopeId","data-v-a942ceef"]]);var Nn={exports:{}},Tr;function xh(){return Tr||(Tr=1,function(c){(function(l){var h;h=Mr(),c.exports=l(h)})(function(l){return l.Polyline._flat=l.LineUtil.isFlat||l.Polyline._flat||function(h){return!l.Util.isArray(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]<"u"},l.GeometryUtil=l.extend(l.GeometryUtil||{},{distance:function(h,d,n){return h.latLngToLayerPoint(d).distanceTo(h.latLngToLayerPoint(n))},distanceSegment:function(h,d,n,r){var s=h.latLngToLayerPoint(d),f=h.latLngToLayerPoint(n),_=h.latLngToLayerPoint(r);return l.LineUtil.pointToSegmentDistance(s,f,_)},readableDistance:function(h,d){var n=d!=="imperial",r;return n?h>1e3?r=(h/1e3).toFixed(2)+" km":r=h.toFixed(1)+" m":(h*=1.09361,h>1760?r=(h/1760).toFixed(2)+" miles":r=h.toFixed(1)+" yd"),r},belongsSegment:function(h,d,n,r){r=r===void 0?.2:r;var s=d.distanceTo(n),f=d.distanceTo(h)+h.distanceTo(n)-s;return f/s<r},length:function(h){var d=l.GeometryUtil.accumulatedLengths(h);return d.length>0?d[d.length-1]:0},accumulatedLengths:function(h){if(typeof h.getLatLngs=="function"&&(h=h.getLatLngs()),h.length===0)return[];for(var d=0,n=[0],r=0,s=h.length-1;r<s;r++)d+=h[r].distanceTo(h[r+1]),n.push(d);return n},closestOnSegment:function(h,d,n,r){var s=h.getMaxZoom();s===1/0&&(s=h.getZoom());var f=h.project(d,s),_=h.project(n,s),m=h.project(r,s),g=l.LineUtil.closestPointOnSegment(f,_,m);return h.unproject(g,s)},closestOnCircle:function(h,d){const n=h.getLatLng(),r=h.getRadius(),s=typeof r=="number"?r:r.radius,f=d.lng,_=d.lat,m=n.lng,g=n.lat,y=f-m,E=_-g,S=Math.sqrt(y*y+E*E),O=m+y/S*s,A=g+E/S*s;return new l.LatLng(A,O)},closest:function(h,d,n,r){var s,f=1/0,_=null,m,g,y,E;if(d instanceof Array)if(d[0]instanceof Array&&typeof d[0][0]!="number"){for(m=0;m<d.length;m++)E=l.GeometryUtil.closest(h,d[m],n,r),E&&E.distance<f&&(f=E.distance,_=E);return _}else if(d[0]instanceof l.LatLng||typeof d[0][0]=="number"||typeof d[0].lat=="number")d=l.polyline(d);else return _;if(!(d instanceof l.Polyline))return _;if(s=JSON.parse(JSON.stringify(d.getLatLngs().slice(0))),d instanceof l.Polygon){var S=function(N){if(l.Polyline._flat(N))N.push(N[0]);else for(var Z=0;Z<N.length;Z++)S(N[Z])};S(s)}if(l.Polyline._flat(s)){if(r){for(m=0,g=s.length;m<g;m++){var O=s[m];y=l.GeometryUtil.distance(h,n,O),y<f&&(f=y,_=O,_.distance=y)}return _}for(m=0,g=s.length;m<g-1;m++){var A=s[m],z=s[m+1];y=l.GeometryUtil.distanceSegment(h,n,A,z),y<=f&&(f=y,_=l.GeometryUtil.closestOnSegment(h,n,A,z),_.distance=y)}return _}else{for(m=0;m<s.length;m++)E=l.GeometryUtil.closest(h,s[m],n,r),E.distance<f&&(f=E.distance,_=E);return _}},closestLayer:function(h,d,n){for(var r=1/0,s=null,f=null,_=1/0,m=0,g=d.length;m<g;m++){var y=d[m];if(y instanceof l.LayerGroup){var E=l.GeometryUtil.closestLayer(h,y.getLayers(),n);E.distance<r&&(r=E.distance,s=E)}else y instanceof l.Circle?(f=this.closestOnCircle(y,n),_=l.GeometryUtil.distance(h,n,f)):typeof y.getLatLng=="function"?(f=y.getLatLng(),_=l.GeometryUtil.distance(h,n,f)):(f=l.GeometryUtil.closest(h,y,n),f&&(_=f.distance)),_<r&&(r=_,s={layer:y,latlng:f,distance:_})}return s},nClosestLayers:function(h,d,n,r){if(r=typeof r=="number"?r:d.length,r<1||d.length<1)return null;for(var s=[],f,_,m=0,g=d.length;m<g;m++){var y=d[m];if(y instanceof l.LayerGroup){var E=l.GeometryUtil.closestLayer(h,y.getLayers(),n);s.push(E)}else y instanceof l.Circle?(_=this.closestOnCircle(y,n),f=l.GeometryUtil.distance(h,n,_)):typeof y.getLatLng=="function"?(_=y.getLatLng(),f=l.GeometryUtil.distance(h,n,_)):(_=l.GeometryUtil.closest(h,y,n),_&&(f=_.distance)),s.push({layer:y,latlng:_,distance:f})}return s.sort(function(S,O){return S.distance-O.distance}),s.length>r?s.slice(0,r):s},layersWithin:function(h,d,n,r){r=typeof r=="number"?r:1/0;for(var s=[],f=null,_=0,m=0,g=d.length;m<g;m++){var y=d[m];typeof y.getLatLng=="function"?(f=y.getLatLng(),_=l.GeometryUtil.distance(h,n,f)):(f=l.GeometryUtil.closest(h,y,n),f&&(_=f.distance)),f&&_<r&&s.push({layer:y,latlng:f,distance:_})}var E=s.sort(function(S,O){return S.distance-O.distance});return E},closestLayerSnap:function(h,d,n,r,s){r=typeof r=="number"?r:1/0,s=typeof s=="boolean"?s:!0;var f=l.GeometryUtil.closestLayer(h,d,n);if(!f||f.distance>r)return null;if(s&&typeof f.layer.getLatLngs=="function"){var _=l.GeometryUtil.closest(h,f.layer,f.latlng,!0);_.distance<r&&(f.latlng=_,f.distance=l.GeometryUtil.distance(h,_,n))}return f},interpolateOnPointSegment:function(h,d,n){return l.point(h.x*(1-n)+n*d.x,h.y*(1-n)+n*d.y)},interpolateOnLine:function(h,d,n){d=d instanceof l.Polyline?d.getLatLngs():d;var r=d.length;if(r<2)return null;if(n=Math.max(Math.min(n,1),0),n===0)return{latLng:d[0]instanceof l.LatLng?d[0]:l.latLng(d[0]),predecessor:-1};if(n==1)return{latLng:d[d.length-1]instanceof l.LatLng?d[d.length-1]:l.latLng(d[d.length-1]),predecessor:d.length-2};var s=h.getMaxZoom();s===1/0&&(s=h.getZoom());for(var f=[],_=0,m=0;m<r;m++)f[m]=h.project(d[m],s),m>0&&(_+=f[m-1].distanceTo(f[m]));for(var g=_*n,y=0,E=0,m=0;E<g;m++){var S=f[m],O=f[m+1];y=E,E+=S.distanceTo(O)}if(S==null&&O==null)var S=f[0],O=f[1],m=1;var A=E-y!==0?(g-y)/(E-y):0,z=l.GeometryUtil.interpolateOnPointSegment(S,O,A);return{latLng:h.unproject(z,s),predecessor:m-1}},locateOnLine:function(h,d,n){var r=d.getLatLngs();if(n.equals(r[0]))return 0;if(n.equals(r[r.length-1]))return 1;for(var s=l.GeometryUtil.closest(h,d,n,!1),f=l.GeometryUtil.accumulatedLengths(r),_=f[f.length-1],m=0,g=!1,y=0,E=r.length-1;y<E;y++){var S=r[y],O=r[y+1];if(m=f[y],l.GeometryUtil.belongsSegment(s,S,O,.001)){m+=S.distanceTo(s),g=!0;break}}if(!g)throw"Could not interpolate "+n.toString()+" within "+d.toString();return m/_},reverse:function(h){return l.polyline(h.getLatLngs().slice(0).reverse())},extract:function(h,d,n,r){if(n>r)return l.GeometryUtil.extract(h,l.GeometryUtil.reverse(d),1-n,1-r);n=Math.max(Math.min(n,1),0),r=Math.max(Math.min(r,1),0);var s=d.getLatLngs(),f=l.GeometryUtil.interpolateOnLine(h,d,n),_=l.GeometryUtil.interpolateOnLine(h,d,r);if(n==r){var m=l.GeometryUtil.interpolateOnLine(h,d,r);return[m.latLng]}f.predecessor==-1&&(f.predecessor=0),_.predecessor==-1&&(_.predecessor=0);var g=s.slice(f.predecessor+1,_.predecessor+1);return g.unshift(f.latLng),g.push(_.latLng),g},isBefore:function(h,d){if(!d)return!1;var n=h.getLatLngs(),r=d.getLatLngs();return n[n.length-1].equals(r[0])},isAfter:function(h,d){if(!d)return!1;var n=h.getLatLngs(),r=d.getLatLngs();return n[0].equals(r[r.length-1])},startsAtExtremity:function(h,d){if(!d)return!1;var n=h.getLatLngs(),r=d.getLatLngs(),s=n[0];return s.equals(r[0])||s.equals(r[r.length-1])},computeAngle:function(h,d){return Math.atan2(d.y-h.y,d.x-h.x)*180/Math.PI},computeSlope:function(h,d){var n=(d.y-h.y)/(d.x-h.x),r=h.y-n*h.x;return{a:n,b:r}},rotatePoint:function(h,d,n,r){var s=h.getMaxZoom();s===1/0&&(s=h.getZoom());var f=n*Math.PI/180,_=h.project(d,s),m=h.project(r,s),g=Math.cos(f)*(_.x-m.x)-Math.sin(f)*(_.y-m.y)+m.x,y=Math.sin(f)*(_.x-m.x)+Math.cos(f)*(_.y-m.y)+m.y;return h.unproject(new l.Point(g,y),s)},bearing:function(h,d){var n=Math.PI/180,r=h.lat*n,s=d.lat*n,f=h.lng*n,_=d.lng*n,m=Math.sin(_-f)*Math.cos(s),g=Math.cos(r)*Math.sin(s)-Math.sin(r)*Math.cos(s)*Math.cos(_-f),y=(Math.atan2(m,g)*180/Math.PI+360)%360;return y>=180?y-360:y},destination:function(h,d,n){d=(d+360)%360;var r=Math.PI/180,s=180/Math.PI,f=l.CRS.Earth.R,_=h.lng*r,m=h.lat*r,g=d*r,y=Math.sin(m),E=Math.cos(m),S=Math.cos(n/f),O=Math.sin(n/f),A=Math.asin(y*S+E*O*Math.cos(g)),z=_+Math.atan2(Math.sin(g)*O*E,S-y*Math.sin(A));return z=z*s,z=z>180?z-360:z<-180?z+360:z,l.latLng([A*s,z])},angle:function(h,d,n){var r=h.latLngToContainerPoint(d),s=h.latLngToContainerPoint(n),f=Math.atan2(s.y-r.y,s.x-r.x)*180/Math.PI+90;return f+=f<0?360:0,f},destinationOnSegment:function(h,d,n,r){var s=l.GeometryUtil.angle(h,d,n),f=l.GeometryUtil.destination(d,s,r);return l.GeometryUtil.closestOnSegment(h,f,d,n)}}),l.GeometryUtil})}(Nn)),Nn.exports}xh();const Ph={name:"MapComponent",components:{ConfirmDialog:Zl,Toaster:Sl,SidePanel:ql,ShapeForm:bh},props:{measurements:{type:Array,default:()=>[]}},data(){return{mapAdapter:null,dbFeatures:[],deletedFeatureIds:[],saving:!1,confirmDialogOpen:!1,confirmMessage:"Save changes to the backend?",preparedFeatures:{new:[],modified:[],deleted:[]},mapState:{center:null,zoom:null},sidePanelOpen:!1,selectedFeature:null,selectedLayer:null,selectedFeatureTitle:"Shape Details",highlightStyle:{color:"#ff0000",weight:3,opacity:1,fillOpacity:.2},defaultStyle:{color:"#3388ff",weight:2,opacity:.8,fillOpacity:.2}}},mounted(){this.mapAdapter=new da("map");let c=[14.5995,120.9842],l=13;try{const d=localStorage.getItem("mapState");if(d){const n=JSON.parse(d);n.lat&&n.lng&&(c=[n.lat,n.lng],l=n.zoom||l)}}catch(d){console.warn("Failed to restore map state",d)}this.mapAdapter.initMap(c,l);let h=[];this.measurements&&this.measurements.length>0&&this.measurements.forEach(d=>{if(console.log(d.name),d.geojson&&d.geojson.type==="FeatureCollection"&&Array.isArray(d.geojson.features))d.geojson.features.forEach(n=>{n._dbId=d.id,n._fromDb=!0,n._modified=!1,n.name=d.name,n.properties||(n.properties={}),n.properties._dbId=d.id,h.push(n)});else if(d.geojson&&d.geojson.type==="Feature"){const n=d.geojson;n._dbId=d.id,n._fromDb=!0,n._modified=!1,n.name=d.name,n.properties||(n.properties={}),n.properties._dbId=d.id,h.push(n)}}),h.forEach(d=>{this.mapAdapter.addGeoJSONFeature(d),this.dbFeatures.push(d)}),this.mapAdapter.on("editstart",()=>{console.log("Edit started")}),this.mapAdapter.on("editstop",()=>{console.log("Edit stopped")}),this.mapAdapter.on("featureClick",d=>{this.openSidePanel(d.feature,d.layer)}),this.mapAdapter.onFeatureEdited=d=>{d._modified=!0},this.mapAdapter.onFeatureDeleted=d=>{let n=null;d._fromDb&&d._dbId?n=d._dbId:d.properties&&d.properties._dbId&&(n=d.properties._dbId),n&&this.deletedFeatureIds.push(n)}},beforeDestroy(){this.mapAdapter&&(this.mapAdapter.destroyMap(),this.mapAdapter=null)},methods:{calculatePerimeter(c){let l=0;if(c&&c.length>1){for(let h=0;h<c.length-1;h++){const d=wt.latLng(c[h].lat,c[h].lng),n=wt.latLng(c[h+1].lat,c[h+1].lng);l+=d.distanceTo(n)}if(c.length>2){const h=wt.latLng(c[0].lat,c[0].lng),d=wt.latLng(c[c.length-1].lat,c[c.length-1].lng);l+=d.distanceTo(h)}}return l},formatArea(c){return c?c<1e4?Math.round(c)+" m":Math.round(c/1e4)/100+" ha":"0 m"},formatLength(c){return c?c<1e3?Math.round(c)+" m":Math.round(c/100)/10+" km":"0 m"},calculateFallbackArea(c){let l=0;const h=c.length;if(h<3)return 0;for(let n=0;n<h;n++){const r=(n+1)%h;l+=c[n].lng*c[r].lat,l-=c[r].lng*c[n].lat}return Math.abs(l)*85e3/2},showConfirmDialog(){if(console.log("showConfirmDialog"),console.log("Before:",this.confirmDialogOpen),this.mapAdapter){const c=this.mapAdapter.getAllDrawnGeoJSON(),l=[],h=[];c&&c.features&&c.features.forEach(d=>{const n=d.properties&&d.properties._dbId?d.properties._dbId:void 0;if(n){if(d._modified){const r={id:n,geojson:{...d}};r.geojson.properties&&delete r.geojson.properties._dbId,delete r.geojson._dbId,delete r.geojson._fromDb,delete r.geojson._modified,h.push(r)}}else{let r=null,s=null;if(d.geometry&&d.geometry.type==="Polygon"){const _=d.geometry.coordinates[0].map(m=>({lat:m[1],lng:m[0]}));try{wt.GeometryUtil&&typeof wt.GeometryUtil.geodesicArea=="function"?r=wt.GeometryUtil.geodesicArea(_):(console.warn("GeometryUtil not available, using simpler area calculation"),r=this.calculateFallbackArea(_)),s=this.calculatePerimeter(_),console.log("Calculated measurements:",{area:r,perimeter:s})}catch(m){console.error("Error calculating area/perimeter:",m),r=1e3,s=150}}const f={geojson:{...d},area:r,perimeter:s};f.geojson.properties&&delete f.geojson.properties._dbId,delete f.geojson._dbId,delete f.geojson._fromDb,delete f.geojson._modified,l.push(f)}}),this.preparedFeatures={new:l,modified:h,deleted:this.deletedFeatureIds},this.mapState=this.mapAdapter.getMapState(),this.mapState&&localStorage.setItem("mapState",JSON.stringify({lat:this.mapState.center.lat,lng:this.mapState.center.lng,zoom:this.mapState.zoom})),this.confirmMessage=!c||c.features.length===0?"No measurements found. This will erase all saved measurements. Continue?":"Save current session to the database?",this.confirmDialogOpen=!0,console.log("After setting:",this.confirmDialogOpen),setTimeout(()=>{this.confirmDialogOpen=!0,console.log("After timeout:",this.confirmDialogOpen)},0)}},cancelSave(){re("Save operation cancelled"),this.confirmDialogOpen=!1},selectLayerById(c){},formatShapeArea(c){if(!c.properties||!c.properties.area){const l=this.estimatePolygonArea(c.geometry.coordinates);return this.formatArea(l)}return this.formatArea(c.properties.area)},formatShapeLength(c){if(!c.properties||!c.properties.length){const l=this.estimateLineLength(c.geometry.coordinates);return this.formatDistance(l)}return this.formatDistance(c.properties.length)},estimatePolygonArea(c){return 1e4},estimateLineLength(c){return 500},formatArea(c){return c?c>=1e6?`${(c/1e6).toFixed(2)} km`:`${c.toFixed(2)} m`:"N/A"},formatDistance(c){return c?c>=1e3?`${(c/1e3).toFixed(2)} km`:`${c.toFixed(2)} m`:"N/A"},openSidePanel(c,l){this.selectedLayer&&this.selectedLayer!==l&&this.resetLayerStyle(this.selectedLayer),this.selectedFeature=c,this.selectedLayer=l,l&&this.highlightLayer(l);let h="Shape Details";c.properties&&(c.properties.name?h=c.properties.name:c.properties.description?h=c.properties.description:(c.properties.id||c.properties._dbId)&&(h=`Shape #${c.properties.id||c.properties._dbId}`)),console.log("Side Panel - Feature properties:",c.properties||{}),this.selectedFeatureTitle=h,this.sidePanelOpen=!0},async locateUser(){re.info("Getting your location...");try{const c=await this.getUserLocation();if(c&&this.mapAdapter&&this.mapAdapter.map){const l=c[0],h=c[1];this.mapAdapter.map.setView([l,h],15);const d=wt.marker([l,h],{icon:wt.divIcon({className:"user-location-marker",html:'<div style="background-color: #4285F4; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3);"></div>',iconSize:[22,22],iconAnchor:[11,11]})}).addTo(this.mapAdapter.map);setTimeout(()=>{d&&this.mapAdapter&&this.mapAdapter.map&&this.mapAdapter.map.removeLayer(d)},5e3),re.success("Map centered to your location")}}catch(c){console.error("Location error:",c),re.error("Could not get your location")}},getUserLocation(){return new Promise((c,l)=>{if(!navigator.geolocation){l(new Error("Geolocation not supported by your browser"));return}navigator.geolocation.getCurrentPosition(h=>{c([h.coords.latitude,h.coords.longitude])},h=>{l(h)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})},highlightLayer(c){c&&c.setStyle&&(c.setStyle(this.highlightStyle),c.bringToFront&&c.bringToFront())},resetLayerStyle(c){c&&c.setStyle&&c.setStyle(this.defaultStyle)},saveConfirmed(){this.saving=!0,za.Inertia.post("/measurements",{new:this.preparedFeatures.new,modified:this.preparedFeatures.modified,deleted:this.preparedFeatures.deleted},{onSuccess:c=>{if(c.props.flash&&c.props.flash.success){const l=c.props.flash.stats||{},h=(l.updated||0)+(l.deleted||0)+(l.inserted||0);re.success(`Measurements saved successfully! (${h} changes)`),this.deletedFeatureIds=[]}else re.success("Measurements saved successfully!");this.mapState&&this.mapAdapter&&this.mapAdapter.setMapState(this.mapState),this.saving=!1,this.confirmDialogOpen=!1},onError:c=>{var l,h;c.response&&c.response.status===409?(re.error("Conflict detected: Another user may have modified these measurements"),console.error("Conflict error:",((h=(l=c.response)==null?void 0:l.data)==null?void 0:h.message)||"Unknown conflict")):(re.error("Failed to save measurements"),console.error("Save error:",c)),this.saving=!1,this.confirmDialogOpen=!1}})}},watch:{sidePanelOpen(c){!c&&this.selectedLayer&&(this.resetLayerStyle(this.selectedLayer),this.selectedLayer=null)}}},Th=["disabled"],Eh={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-navigation",style:{"margin-right":"6px"}},Mh={key:1,class:"feature-details"},kh={key:0,class:"geometry-info"},Sh={key:0},Ch={key:1};function Dh(c,l,h,d,n,r){const s=Si("Toaster"),f=Si("ShapeForm"),_=Si("SidePanel"),m=Si("ConfirmDialog");return Y(),nt(me,null,[l[11]||(l[11]=I("div",{id:"map",style:{height:"100vh",width:"100vw",overflow:"hidden",position:"absolute",top:"0",left:"0"}},null,-1)),pe(s,{position:"top-right",richColors:""}),I("button",{onClick:l[0]||(l[0]=(...g)=>r.showConfirmDialog&&r.showConfirmDialog(...g)),disabled:n.saving,style:{position:"absolute",bottom:"16px",left:"16px","z-index":"1000",background:"#fff",border:"1px solid #ccc",padding:"8px 16px","border-radius":"4px"}},Ot(n.saving?"Saving...":"Save Session"),9,Th),I("button",{onClick:l[1]||(l[1]=(...g)=>r.locateUser&&r.locateUser(...g)),style:{position:"absolute",bottom:"16px",left:"160px","z-index":"1000",background:"#fff",border:"1px solid #ccc",padding:"8px 16px","border-radius":"4px",display:"flex","align-items":"center"}},[(Y(),nt("svg",Eh,l[4]||(l[4]=[I("polygon",{points:"3 11 22 2 13 21 11 13 3 11"},null,-1)]))),l[5]||(l[5]=Re(" Locate Me "))]),pe(_,{modelValue:n.sidePanelOpen,"onUpdate:modelValue":l[2]||(l[2]=g=>n.sidePanelOpen=g),title:n.selectedFeatureTitle},{default:ze(()=>[n.selectedFeature&&n.selectedFeature.properties&&n.selectedFeature.properties._dbId?(Y(),Be(f,{key:0,shapeId:n.selectedFeature.properties._dbId},null,8,["shapeId"])):n.selectedFeature?(Y(),nt("div",Mh,[l[10]||(l[10]=I("div",{class:"info-message"},[I("p",null,"This shape has not been saved to the database yet."),I("p",null,"Save your session to create a permanent record.")],-1)),n.selectedFeature.geometry?(Y(),nt("div",kh,[l[9]||(l[9]=I("h4",null,"Shape Information",-1)),I("p",null,[l[6]||(l[6]=I("strong",null,"Type:",-1)),Re(" "+Ot(n.selectedFeature.geometry.type),1)]),n.selectedFeature.geometry.type==="Polygon"?(Y(),nt("p",Sh,[l[7]||(l[7]=I("strong",null,"Estimated Area:",-1)),Re(" "+Ot(r.formatShapeArea(n.selectedFeature)),1)])):n.selectedFeature.geometry.type==="LineString"?(Y(),nt("p",Ch,[l[8]||(l[8]=I("strong",null,"Estimated Length:",-1)),Re(" "+Ot(r.formatShapeLength(n.selectedFeature)),1)])):qt("",!0)])):qt("",!0)])):qt("",!0)]),_:1},8,["modelValue","title"]),pe(m,{modelValue:n.confirmDialogOpen,"onUpdate:modelValue":l[3]||(l[3]=g=>n.confirmDialogOpen=g),title:"Save Changes",message:n.confirmMessage,loading:n.saving,onConfirm:r.saveConfirmed,onCancel:r.cancelSave},null,8,["modelValue","message","loading","onConfirm","onCancel"])],64)}const Ah=Ii(Ph,[["render",Dh],["__scopeId","data-v-46310eb1"]]);export{Ah as M};
